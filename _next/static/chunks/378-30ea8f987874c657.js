(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[378],{2921:function(e,t,s){"use strict";var i=s(8256),o=s.n(i);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */t.Z=o().Theme.defineTheme("dark",{base:o().Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}})},2744:function(e,t,s){"use strict";s.d(t,{f:function(){return n}});var i=s(8256),o=s.n(i);/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n{constructor(e){this.workspace_=e,this.id="zoomToFit",this.svgGroup_=null,this.left_=0,this.top_=0,this.WIDTH_=32,this.HEIGHT_=32,this.MARGIN_VERTICAL_=20,this.MARGIN_HORIZONTAL_=20,this.initialized_=!1}init(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[o().ComponentManager.Capability.POSITIONABLE]}),this.createDom_(),this.initialized_=!0,this.workspace_.resize()}dispose(){this.svgGroup_&&o().utils.dom.removeNode(this.svgGroup_),this.onZoomToFitWrapper_&&(o().browserEvents.unbind(this.onZoomToFitWrapper_),this.onZoomToFitWrapper_=null)}createDom_(){this.svgGroup_=o().utils.dom.createSvgElement(o().utils.Svg.IMAGE,{height:this.HEIGHT_+"px",width:this.WIDTH_+"px",class:"zoomToFit"}),this.svgGroup_.setAttributeNS(o().utils.dom.XLINK_NS,"xlink:href",r),o().utils.dom.insertAfter(this.svgGroup_,this.workspace_.getBubbleCanvas()),this.onZoomToFitWrapper_=o().browserEvents.conditionalBind(this.svgGroup_,"mousedown",null,this.onClick_.bind(this))}onClick_(){this.workspace_.zoomToFit();let e=new(o().Events.get(o().Events.CLICK))(null,this.workspace_.id,"zoom_reset_control");o().Events.fire(e)}getBoundingRectangle(){return new(o()).utils.Rect(this.top_,this.top_+this.HEIGHT_,this.left_,this.left_+this.WIDTH_)}position(e,t){if(!this.initialized_)return;let s=this.workspace_.scrollbar&&this.workspace_.scrollbar.canScrollHorizontally(),i=this.workspace_.scrollbar&&this.workspace_.scrollbar.canScrollVertically();e.toolboxMetrics.position===o().TOOLBOX_AT_LEFT||this.workspace_.horizontalLayout&&!this.workspace_.RTL?(this.left_=e.absoluteMetrics.left+e.viewMetrics.width-this.WIDTH_-this.MARGIN_HORIZONTAL_,s&&!this.workspace_.RTL&&(this.left_-=o().Scrollbar.scrollbarThickness)):(this.left_=this.MARGIN_HORIZONTAL_,s&&this.workspace_.RTL&&(this.left_+=o().Scrollbar.scrollbarThickness));let n=e.toolboxMetrics.position!==o().TOOLBOX_AT_BOTTOM;n?(this.top_=e.absoluteMetrics.top+e.viewMetrics.height-this.HEIGHT_-this.MARGIN_VERTICAL_,i&&(this.top_-=o().Scrollbar.scrollbarThickness)):this.top_=e.absoluteMetrics.top+this.MARGIN_VERTICAL_;let r=this.getBoundingRectangle();for(let e=0,s;s=t[e];e++)r.intersects(s)&&(n?this.top_=s.top-this.HEIGHT_-this.MARGIN_VERTICAL_:this.top_=s.bottom+this.MARGIN_VERTICAL_,r=this.getBoundingRectangle(),e=-1);this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}}let r="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzU0NkU3QSI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTUgNi40Mkw4LjA5IDkuNSA5LjUgOC4wOSA2LjQxIDVIOVYzSDN2Nmgyem0xMC0zLjQxdjJoMi41N0wxNC41IDguMDlsMS40MSAxLjQxTDE5IDYuNDFWOWgyVjMuMDF6bTQgMTQuNTdsLTMuMDktMy4wOC0xLjQxIDEuNDFMMTcuNTkgMTlIMTV2Mmg2di02aC0yek04LjA5IDE0LjVMNSAxNy41OVYxNUgzdjZoNnYtMkg2LjQybDMuMDgtMy4wOXoiLz48L3N2Zz4=";o().Css.register(`
.zoomToFit {
  opacity: 0.4;
}
.zoomToFit:hover {
  opacity: 0.6;
}
.zoomToFit:active {
  opacity: 0.8;
}
`)},8962:function(e,t,s){"use strict";s.d(t,{J:function(){return x},D7:function(){return w}});var i=s(8256);/**
 * @license
 * Copyright 2022 MIT
 * SPDX-License-Identifier: Apache-2.0
 */let o=new WeakMap,n=new WeakMap,r=new WeakMap,l=new Set,a=[],u=[],c=[],_=0,d=function(e,t=!1){for(;e;)if((e=t?e.getParent():e.getSurroundParent())&&o.get(e.workspace).has(e.id))return!0;return!1},T=function(){let e=[];l.forEach(t=>{delete t.source,e.push(t)}),_=Date.now(),localStorage.setItem("blocklyStashMulti",JSON.stringify(e)),localStorage.setItem("blocklyStashConnection",JSON.stringify(a)),localStorage.setItem("blocklyStashTime",_)},p=function(){let e=JSON.parse(localStorage.getItem("blocklyStashMulti")),t=JSON.parse(localStorage.getItem("blocklyStashConnection")),s=localStorage.getItem("blocklyStashTime");e&&parseInt(s)>_&&(_=s,l.clear(),e.forEach(e=>{l.add(e)}),a.length=0,t.forEach(e=>{a.push(e)}))},g=function(e){if(!e)return l.size;let t=JSON.parse(localStorage.getItem("blocklyStashMulti")),s=localStorage.getItem("blocklyStashTime");return t&&parseInt(s)>_?t.length:l.size},h=function(e){let t="blockCopyToStorage",s={displayText:function(e){let t=0,n=e.block.workspace,r=o.get(n);return(r.forEach(function(e){let i=n.getBlockById(e);s.check(i)&&t++}),t<=1)?i.Msg.CROSS_TAB_COPY?i.Msg.CROSS_TAB_COPY:"Copy":i.Msg.CROSS_TAB_COPY_X_BLOCKS?i.Msg.CROSS_TAB_COPY_X_BLOCKS.replace("%1",t):(i.Msg.CROSS_TAB_COPY?i.Msg.CROSS_TAB_COPY:"Copy")+" ("+t+")"},preconditionFn:function(t){let n=t.block.workspace;if(n.options.readOnly&&!e)return"hidden";let r=i.common.getSelected(),l=o.get(n);if(!l.size)return s.check(r)?"enabled":"disabled";for(let e of l){let t=n.getBlockById(e);if(s.check(t))return"enabled"}return"disabled"},check:function(e){return e&&e.isDeletable()&&e.isMovable()&&!d(e)},callback:function(t){let n=t.block.workspace;l.clear(),n.hideChaff();let r=[],u=function(e){s.check(e)&&(l.add(e.toCopyData()),r.push(e.id))},c=i.common.getSelected(),_=o.get(n);return i.Events.setGroup(!0),_.size||u(c),_.forEach(function(e){let t=n.getBlockById(e);u(t)}),a.length=0,r.forEach(function(e){let t=n.getBlockById(e),s=t.getParent();s&&-1!==r.indexOf(s.id)&&s.getNextBlock()===t&&a.push([r.indexOf(s.id),r.indexOf(t.id)])}),e&&T(),i.Events.setGroup(!1),!0},scopeType:i.ContextMenuRegistry.ScopeType.BLOCK,id:t,weight:0};null!==i.ContextMenuRegistry.registry.getItem(t)&&i.ContextMenuRegistry.registry.unregister(t),i.ContextMenuRegistry.registry.register(s)},E=function(){let e={displayText:function(t){let s=0,n=t.block.workspace,r=o.get(n);return(r.forEach(function(t){let i=n.getBlockById(t);e.check(i)&&s++}),s<=1)?i.Msg.DUPLICATE_BLOCK:i.Msg.DUPLICATE_X_BLOCKS?i.Msg.DUPLICATE_X_BLOCKS.replace("%1",s):i.Msg.DUPLICATE_BLOCK+" ("+s+")"},preconditionFn:function(e){let t=e.block;return!t.isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},check:function(t){return t&&"enabled"===e.preconditionFn({block:t})&&!d(t)},callback:function(t){let s={},n=[],r=function(t){e.check(t)&&(s[t.id]=i.clipboard.duplicate(t)),t.pathObject.updateSelected(!1)},l=t.block.workspace,a=o.get(l);for(let[e,o]of(i.Events.setGroup(!0),a.size||r(t.block),a.forEach(function(e){let t=l.getBlockById(e);r(t)}),a.clear(),Object.entries(s))){let t=l.getBlockById(e),i=t.getParent();o.id&&(i&&i.id in s&&i.getNextBlock()===t&&n.push([s[i.id].nextConnection,o.previousConnection]),a.add(o.id),o.pathObject.updateSelected(!0))}n.forEach(function(e){e[0].connect(e[1])}),i.Events.setGroup(!1)},scopeType:i.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1};i.ContextMenuRegistry.registry.register(e)},m=function(){let e={displayText:function(t){let s=0,n=t.block.hasIcon(i.icons.CommentIcon.TYPE),r=t.block.workspace,l=o.get(r);return(l.forEach(function(t){let o=r.getBlockById(t);e.check(o)&&n===o.hasIcon(i.icons.CommentIcon.TYPE)&&s++}),n)?s<=1?i.Msg.REMOVE_COMMENT:i.Msg.REMOVE_X_COMMENTS?i.Msg.REMOVE_X_COMMENTS.replace("%1",s):i.Msg.REMOVE_COMMENT+" ("+s+")":s<=1?i.Msg.ADD_COMMENT:i.Msg.ADD_X_COMMENTS?i.Msg.ADD_X_COMMENTS.replace("%1",s):i.Msg.ADD_COMMENT+" ("+s+")"},preconditionFn:function(e){let t=e.block;return!i.utils.userAgent.IE&&!t.isInFlyout&&t.workspace.options.comments&&!t.isCollapsed()&&t.isEditable()?"enabled":"hidden"},check:function(t){return t&&"enabled"===e.preconditionFn({block:t})},callback:function(t){let s=t.block.hasIcon(i.icons.CommentIcon.TYPE),n=function(t){e.check(t)&&(s?t.setCommentText(null):t.setCommentText(""))},r=t.block.workspace,l=o.get(r);i.Events.setGroup(!0),l.size||n(t.block),l.forEach(function(e){let t=r.getBlockById(e);n(t)}),i.Events.setGroup(!1)},scopeType:i.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2};i.ContextMenuRegistry.registry.register(e)},S=function(){let e={displayText:function(t){let s=0,n=t.block.getInputsInline(),r=t.block.workspace,l=o.get(r);return(l.forEach(function(t){let i=r.getBlockById(t);e.check(i)&&i.getInputsInline()===n&&s++}),n)?s<=1?i.Msg.EXTERNAL_INPUTS:i.Msg.EXTERNAL_X_INPUTS?i.Msg.EXTERNAL_X_INPUTS.replace("%1",s):i.Msg.EXTERNAL_INPUTS+" ("+s+")":s<=1?i.Msg.INLINE_INPUTS:i.Msg.INLINE_X_INPUTS?i.Msg.INLINE_X_INPUTS.replace("%1",s):i.Msg.INLINE_INPUTS+" ("+s+")"},preconditionFn:function(e){let t=e.block;if(!t.isInFlyout&&t.isMovable()&&!t.isCollapsed()){for(let e=1;e<t.inputList.length;e++)if(t.inputList[e-1].type!==i.inputTypes.STATEMENT&&t.inputList[e].type!==i.inputTypes.STATEMENT)return"enabled"}return"hidden"},check:function(t){return t&&"enabled"===e.preconditionFn({block:t})},callback:function(t){let s=!t.block.getInputsInline(),n=function(t){e.check(t)&&t.setInputsInline(s)},r=t.block.workspace,l=o.get(r);i.Events.setGroup(!0),l.size||n(t.block),l.forEach(function(e){let t=r.getBlockById(e);n(t)}),i.Events.setGroup(!1)},scopeType:i.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3};i.ContextMenuRegistry.registry.register(e)},I=function(){let e={displayText:function(t){let s=0,n=t.block.isCollapsed(),r=t.block.workspace,l=o.get(r);return(l.forEach(function(t){let i=r.getBlockById(t);e.check(i)&&i.isCollapsed()===n&&s++}),n)?s<=1?i.Msg.EXPAND_BLOCK:i.Msg.EXPAND_X_BLOCKS?i.Msg.EXPAND_X_BLOCKS.replace("%1",s):i.Msg.EXPAND_BLOCK+" ("+s+")":s<=1?i.Msg.COLLAPSE_BLOCK:i.Msg.COLLAPSE_X_BLOCKS?i.Msg.COLLAPSE_X_BLOCKS.replace("%1",s):i.Msg.COLLAPSE_BLOCK+" ("+s+")"},preconditionFn:function(e){let t=e.block;return!t.isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},check:function(t){return t&&"enabled"===e.preconditionFn({block:t})&&(!d(t)||t.isCollapsed())},callback:function(t){let s=!t.block.isCollapsed(),n=function(t){e.check(t)&&t.setCollapsed(s)},r=t.block.workspace,l=o.get(r);i.Events.setGroup(!0),l.size||n(t.block),l.forEach(function(e){let t=r.getBlockById(e);n(t)}),i.Events.setGroup(!1)},scopeType:i.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4};i.ContextMenuRegistry.registry.register(e)},$=function(){let e={displayText:function(t){let s=0,n=t.block.isEnabled(),r=t.block.workspace,l=o.get(r);return(l.forEach(function(t){let i=r.getBlockById(t);e.check(i)&&i.isEnabled()===n&&s++}),n)?s<=1?i.Msg.DISABLE_BLOCK:i.Msg.DISABLE_X_BLOCKS?i.Msg.DISABLE_X_BLOCKS.replace("%1",s):i.Msg.DISABLE_BLOCK+" ("+s+")":s<=1?i.Msg.ENABLE_BLOCK:i.Msg.ENABLE_X_BLOCKS?i.Msg.ENABLE_X_BLOCKS.replace("%1",s):i.Msg.ENABLE_BLOCK+" ("+s+")"},preconditionFn:function(e){let t=e.block;return!t.isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},check:function(t){return t&&"enabled"===e.preconditionFn({block:t})&&(!d(t)||!t.isEnabled())},callback:function(t){let s=!t.block.isEnabled(),n=function(t){e.check(t)&&t.setEnabled(s)},r=t.block.workspace,l=o.get(r);i.Events.setGroup(!0),l.size||n(t.block),l.forEach(function(e){let t=r.getBlockById(e);n(t)}),i.Events.setGroup(!1)},scopeType:i.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5};i.ContextMenuRegistry.registry.register(e)},O=function(){let e={displayText:function(e){let t=0,s=e.block.workspace,n=o.get(s);return n.forEach(function(e){let i=s.getBlockById(e);if(i&&!d(i)){t+=i.getDescendants(!1).length;let e=i.getNextBlock();e&&(t-=e.getDescendants(!1).length)}}),1===t?i.Msg.DELETE_BLOCK:i.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},check:function(t){return t&&!t.workspace.isFlyout&&"enabled"===e.preconditionFn({block:t})&&!d(t)},callback:function(t){let s=function(t){e.check(t)&&(t.workspace.hideChaff(),t.outputConnection?t.dispose(!1,!0):t.dispose(!0,!0))},n=t.block.workspace,r=o.get(n);i.Events.setGroup(!0),r.size||s(t.block),r.forEach(function(e){let t=n.getBlockById(e);s(t)}),i.Events.setGroup(!1)},scopeType:i.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6};i.ContextMenuRegistry.registry.register(e)},L=function(e){let t="blockPasteFromStorage",s={displayText:function(){let t=g(e);return t<=1?i.Msg.CROSS_TAB_PASTE?i.Msg.CROSS_TAB_PASTE:"Paste":i.Msg.CROSS_TAB_PASTE_X_BLOCKS?i.Msg.CROSS_TAB_PASTE_X_BLOCKS.replace("%1",t):(i.Msg.CROSS_TAB_PASTE?i.Msg.CROSS_TAB_PASTE:"Paste")+" ("+t+")"},preconditionFn:function(t){return t.workspace.options.readOnly?"hidden":1>g(e)?"disabled":"enabled"},callback:function(t){let s=t.workspace,n=o.get(s);i.Events.setGroup(!0),n.forEach(function(e){let t=s.getBlockById(e);t&&t.pathObject.updateSelected(!1)}),n.clear();let r=[];return e&&p(),l.forEach(function(e){if(e.source&&(s=e.source),s.isFlyout&&(s=s.targetWorkspace),e.typeCounts&&s.isCapacityAvailable(e.typeCounts)){let t=s.paste(e.saveInfo);r.push(t),t.pathObject.updateSelected(!0),o.get(t.workspace).add(t.id)}}),a.forEach(function(e){r[e[0]].nextConnection.connect(r[e[1]].previousConnection)}),i.Events.setGroup(!1),!0},scopeType:i.ContextMenuRegistry.ScopeType.WORKSPACE,id:t,weight:0};null!==i.ContextMenuRegistry.registry.getItem(t)&&i.ContextMenuRegistry.registry.unregister(t),i.ContextMenuRegistry.registry.register(s)},R=function(){let e="workspaceSelectAll",t={displayText:function(){return"Select all Blocks"},preconditionFn:function(e){return e.workspace.getTopBlocks().some(e=>t.check(e))?"enabled":"disabled"},check:function(e){return e&&(e.isDeletable()||e.isMovable())&&!e.isInsertionMarker()},callback:function(e){let s=o.get(e.workspace);i.getSelected()&&!s.has(i.getSelected().id)&&(i.getSelected().pathObject.updateSelected(!1),i.common.setSelected(null));let n=[];e.workspace.getTopBlocks().forEach(function(e){if(t.check(e)){n.push(e);let t=e.getNextBlock();for(;t;)n.push(t),t=t.getNextBlock()}}),n.forEach(function(e){o.get(e.workspace).add(e.id),i.common.getSelected()||i.common.setSelected(e),e.pathObject.updateSelected(!0)})},scopeType:i.ContextMenuRegistry.ScopeType.WORKSPACE,id:e,weight:5};null!==i.ContextMenuRegistry.registry.getItem(e)&&i.ContextMenuRegistry.registry.unregister(e),i.ContextMenuRegistry.registry.register(t)},f=function(){for(let e of(u.length=0,["blockDuplicate","blockComment","blockInline","blockCollapseExpand","blockDisable","blockDelete"]))null!==i.ContextMenuRegistry.registry.getItem(e)&&(i.ContextMenuRegistry.registry.unregister(e),u.push(e))},b=function(){let e={blockDuplicate:i.ContextMenuItems.registerDuplicate,blockComment:i.ContextMenuItems.registerComment,blockInline:i.ContextMenuItems.registerInline,blockCollapseExpand:i.ContextMenuItems.registerCollapseExpandBlock,blockDisable:i.ContextMenuItems.registerDisable,blockDelete:i.ContextMenuItems.registerDelete};for(let t of u)e[t]()},A=function(e,t){e&&(h(t),L(t));let s={blockDuplicate:E,blockComment:m,blockInline:S,blockCollapseExpand:I,blockDisable:$,blockDelete:O};for(let e of u)s[e]();R()},M=function(){let e={name:i.ShortcutItems.names.DELETE,preconditionFn:function(t){if(t.options.readOnly||i.Gesture.inProgress())return!1;let s=i.common.getSelected(),n=o.get(t);if(!n.size)return e.check(s);for(let s of n){let i=t.getBlockById(s);if(e.check(i))return!0}return!1},check:function(e){return e&&e.isDeletable()&&!e.workspace.isFlyout&&!d(e)},callback:function(t,s){s.preventDefault();let n=function(t){e.check(t)&&(t.workspace.hideChaff(),t.outputConnection?t.dispose(!1,!0):t.dispose(!0,!0))},r=i.common.getSelected();i.Events.setGroup(!0);let l=o.get(t);return l.size||n(r),l.forEach(function(e){let s=t.getBlockById(e);n(s)}),i.Events.setGroup(!1),!0}};i.ShortcutRegistry.registry.register(e),i.ShortcutRegistry.registry.addKeyMapping(i.utils.KeyCodes.DELETE,e.name),i.ShortcutRegistry.registry.addKeyMapping(i.utils.KeyCodes.BACKSPACE,e.name)},N=function(e){let t={name:i.ShortcutItems.names.COPY,preconditionFn:function(e){if(e.options.readOnly||i.Gesture.inProgress())return!1;let s=i.common.getSelected(),n=o.get(e);if(!n.size)return t.check(s);for(let s of n){let i=e.getBlockById(s);if(t.check(i))return!0}return!1},check:function(e){return e&&e.isDeletable()&&e.isMovable()&&!d(e)},callback:function(s,n){n.preventDefault(),l.clear(),s.hideChaff();let r=[],u=function(e){t.check(e)&&(l.add(e.toCopyData()),r.push(e.id))},c=i.common.getSelected(),_=o.get(s);return i.Events.setGroup(!0),_.size||u(c),_.forEach(function(e){let t=s.getBlockById(e);u(t)}),a.length=0,r.forEach(function(e){let t=s.getBlockById(e),i=t.getParent();i&&-1!==r.indexOf(i.id)&&i.getNextBlock()===t&&a.push([r.indexOf(i.id),r.indexOf(t.id)])}),e&&T(),i.Events.setGroup(!1),!0}};i.ShortcutRegistry.registry.register(t);let s=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.C,[i.utils.KeyCodes.CTRL]);i.ShortcutRegistry.registry.addKeyMapping(s,i.ShortcutItems.names.COPY);let n=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.C,[i.utils.KeyCodes.ALT]);i.ShortcutRegistry.registry.addKeyMapping(n,i.ShortcutItems.names.COPY);let r=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.C,[i.utils.KeyCodes.META]);i.ShortcutRegistry.registry.addKeyMapping(r,i.ShortcutItems.names.COPY)},C=function(e){let t={name:i.ShortcutItems.names.CUT,preconditionFn:function(e){if(e.options.readOnly||i.Gesture.inProgress())return!1;let s=i.common.getSelected(),n=o.get(e);if(!n.size)return t.check(s);for(let s of n){let i=e.getBlockById(s);if(t.check(i))return!0}return!1},check:function(e){return e&&e.isDeletable()&&e.isMovable()&&!e.workspace.isFlyout&&!d(e)},callback:function(s){l.clear();let n=[],r=function(e){t.check(e)&&(l.add(e.toCopyData()),n.push(e.id))},u=function(e){e&&(e.workspace.hideChaff(),e.outputConnection?e.dispose(!1,!0):e.dispose(!0,!0))},c=i.common.getSelected(),_=o.get(s);return i.Events.setGroup(!0),_.size||r(c),_.forEach(function(e){let t=s.getBlockById(e);r(t)}),a.length=0,n.forEach(function(e){let t=s.getBlockById(e),i=t.getParent();i&&-1!==n.indexOf(i.id)&&i.getNextBlock()===t&&a.push([n.indexOf(i.id),n.indexOf(t.id)])}),n.forEach(function(e){let t=s.getBlockById(e);u(t)}),e&&T(),i.Events.setGroup(!1),!0}};i.ShortcutRegistry.registry.register(t);let s=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.X,[i.utils.KeyCodes.CTRL]);i.ShortcutRegistry.registry.addKeyMapping(s,t.name);let n=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.X,[i.utils.KeyCodes.ALT]);i.ShortcutRegistry.registry.addKeyMapping(n,t.name);let r=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.X,[i.utils.KeyCodes.META]);i.ShortcutRegistry.registry.addKeyMapping(r,t.name)},y=function(e){let t={name:i.ShortcutItems.names.PASTE,preconditionFn:function(e){return!e.options.readOnly&&!i.Gesture.inProgress()},callback:function(t){let s=o.get(t);i.Events.setGroup(!0),s.forEach(function(e){let s=t.getBlockById(e);s&&s.pathObject.updateSelected(!1)}),s.clear();let n=[];return e&&p(),l.forEach(function(e){if(e.source&&(t=e.source),t.isFlyout&&(t=t.targetWorkspace),e.typeCounts&&t.isCapacityAvailable(e.typeCounts)){let s=t.paste(e.saveInfo);n.push(s),s.pathObject.updateSelected(!0),o.get(s.workspace).add(s.id)}}),a.forEach(function(e){n[e[0]].nextConnection.connect(n[e[1]].previousConnection)}),i.Events.setGroup(!1),!0}};i.ShortcutRegistry.registry.register(t);let s=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.V,[i.utils.KeyCodes.CTRL]);i.ShortcutRegistry.registry.addKeyMapping(s,t.name);let n=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.V,[i.utils.KeyCodes.ALT]);i.ShortcutRegistry.registry.addKeyMapping(n,t.name);let r=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.V,[i.utils.KeyCodes.META]);i.ShortcutRegistry.registry.addKeyMapping(r,t.name)},D=function(){let e="selectall",t={name:e,preconditionFn:function(e){return!!e.getTopBlocks().some(e=>t.check(e))},check:function(e){return e&&(e.isDeletable()||e.isMovable())&&!e.isInsertionMarker()},callback:function(e,s){s.preventDefault();let n=o.get(e);i.getSelected()&&!n.has(i.getSelected().id)&&(i.getSelected().pathObject.updateSelected(!1),i.common.setSelected(null));let r=[];return e.getTopBlocks().forEach(function(e){if(t.check(e)){r.push(e);let t=e.getNextBlock();for(;t;)r.push(t),t=t.getNextBlock()}}),r.forEach(function(e){n.add(e.id),i.common.getSelected()||i.common.setSelected(e),e.pathObject.updateSelected(!0)}),!0}};e in i.ShortcutRegistry.registry.getRegistry()&&i.ShortcutRegistry.registry.unregister(e),i.ShortcutRegistry.registry.register(t);let s=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.A,[i.utils.KeyCodes.CTRL]);i.ShortcutRegistry.registry.addKeyMapping(s,t.name);let n=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.A,[i.utils.KeyCodes.ALT]);i.ShortcutRegistry.registry.addKeyMapping(n,t.name);let r=i.ShortcutRegistry.registry.createSerializedKey(i.utils.KeyCodes.A,[i.utils.KeyCodes.META]);i.ShortcutRegistry.registry.addKeyMapping(r,t.name)},v=function(){for(let e of(c.length=0,[i.ShortcutItems.names.DELETE,i.ShortcutItems.names.COPY,i.ShortcutItems.names.CUT,i.ShortcutItems.names.PASTE]))Object.entries(i.ShortcutRegistry.registry.getRegistry()).map(([e,t])=>t.name).includes(e)&&(i.ShortcutRegistry.registry.unregister(e),c.push(e))},P=function(){let e={[i.ShortcutItems.names.DELETE]:i.ShortcutItems.registerDelete,[i.ShortcutItems.names.COPY]:i.ShortcutItems.registerCopy,[i.ShortcutItems.names.CUT]:i.ShortcutItems.registerCut,[i.ShortcutItems.names.PASTE]:i.ShortcutItems.registerPaste};for(let t of c)e[t]()},k=function(e){let t=[i.ShortcutItems.names.DELETE],s={[i.ShortcutItems.names.DELETE]:M,[i.ShortcutItems.names.COPY]:N,[i.ShortcutItems.names.CUT]:C,[i.ShortcutItems.names.PASTE]:y};for(let i of c)t.includes(i)?s[i]():s[i](e);D()};var B=s(9501),U=s.n(B);class F{constructor(e,t){this.enabled_img="https://github.com/mit-cml/workspace-multiselect/raw/main/test/media/select.svg",this.disabled_img="https://github.com/mit-cml/workspace-multiselect/raw/main/test/media/unselect.svg",this.workspace_=e,this.enabled=!1,this.id="multiselectControls",this.onMultiselectWrapper_=null,this.multiselectGroup_=null,this.initialized_=!1,this.hasDisableWorkspaceDrag_=!1,this.justUnselectedBlock_=null,t&&t.enabledIcon&&(this.enabled_img=t.enabledIcon),t&&t.disabledIcon&&(this.disabled_img=t.disabledIcon),this.blockSelection=o.get(e)}createDom(){return this.svgGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{},null),this.createMultiselectSvg_(),this.svgGroup_}init(){this.workspace_.getComponentManager().addComponent({component:this,weight:3,capabilities:[i.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.workspace_.resize()}dispose(){this.disableMultiselect(),this.workspace_.getComponentManager().removeComponent(this.id),this.svgGroup_&&i.utils.dom.removeNode(this.svgGroup_),this.onMultiselectWrapper_&&i.browserEvents.unbind(this.onMultiselectWrapper_)}getBoundingRectangle(){let e=this.top_+32,t=this.left_+32;return new i.utils.Rect(this.top_,e,this.left_,t)}position(e,t){if(!this.initialized_)return;let s=i.uiPosition.getCornerOppositeToolbox(this.workspace_,e),o=i.uiPosition.getStartPositionRect(s,new i.utils.Size(32,32),20,20,e,this.workspace_),n=s.vertical,r=n===i.uiPosition.verticalPosition.TOP?i.uiPosition.bumpDirection.DOWN:i.uiPosition.bumpDirection.UP,l=i.uiPosition.bumpPositionRect(o,20,r,t);this.top_=l.top,this.left_=l.left,this.svgGroup_&&this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}createMultiselectSvg_(){this.multiselectGroup_=i.utils.dom.createSvgElement(i.utils.Svg.G,{class:"blocklyMultiselect"},this.svgGroup_);let e=i.utils.dom.createSvgElement(i.utils.Svg.IMAGE,{width:32,height:32},this.multiselectGroup_);e.setAttributeNS(i.utils.dom.XLINK_NS,"xlink:href",this.disabled_img),this.onMultiselectWrapper_=i.browserEvents.conditionalBind(this.multiselectGroup_,"mousedown",null,this.switchMultiselect_.bind(this))}switchMultiselect_(e){this.workspace_.markFocused(),this.enabled=!this.enabled,this.enabled?this.enableMultiselect(!0):this.disableMultiselect(!0),i.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()}updateBlocks_(e){e&&(e.isDeletable()||e.isMovable())&&(this.blockSelection.has(e.id)?(this.blockSelection.delete(e.id),this.justUnselectedBlock_=e,e.pathObject.updateSelected(!1)):(this.blockSelection.add(e.id),this.justUnselectedBlock_=null,e.pathObject.updateSelected(!0),e.bringToFront()))}updateMultiselect(){n.get(this.workspace_)?this.justUnselectedBlock_&&i.getSelected()&&i.getSelected().id===this.justUnselectedBlock_.id&&(this.blockSelection.size?i.common.setSelected(this.workspace_.getBlockById(this.blockSelection.keys().next().value)):i.common.setSelected(null),this.justUnselectedBlock_.pathObject.updateSelected(!1),this.justUnselectedBlock_=null):(!i.getSelected()||i.getSelected()&&!this.blockSelection.has(i.getSelected().id))&&(this.blockSelection.forEach(e=>{let t=this.workspace_.getBlockById(e);t&&t.pathObject.updateSelected(!1)}),this.blockSelection.clear(),this.updateBlocks_(i.getSelected())),this.blockSelection.forEach(e=>{let t=this.workspace_.getBlockById(e);t&&t.pathObject.updateSelected(!0)})}enableMultiselect(e=!1){!this.hasDisableWorkspaceDrag_&&this.workspace_.options.moveOptions&&this.workspace_.options.moveOptions.drag&&(this.workspace_.options.moveOptions.drag=!1,this.hasDisableWorkspaceDrag_=!0),this.dragSelect_=new(U())({selectables:this.workspace_.getInjectionDiv().querySelectorAll("g.blocklyDraggable:not(.blocklyInsertionMarker)> path.blocklyPath"),area:this.workspace_.svgGroup_,multiselectMode:!0,draggability:!1,usePointerEvents:!0});let t=(e,t)=>{let s=[];for(let[i,o]of e.entries())for(let[n,r]of e.entries())if(i!==n&&U().isCollision(r,o,0)&&null!==i.parentNode&&null!==n.parentNode&&i.parentNode!==n.parentNode&&i.parentNode.contains(n.parentNode)&&U().isCollision(t,r,1)){s.push(i);break}return s};this.dragSelect_.Selection.filterSelected=({selectorRect:e,select:s,unselect:i})=>{let o=t(s,e);return o.forEach(e=>{let t=s.get(e);s.delete(e),i.set(e,t)}),{select:s,unselect:i}},this.dragSelect_.subscribe("elementselect",e=>{let t=e.item.parentElement;n.get(this.workspace_)&&t&&t.dataset&&t.dataset.id&&this.updateBlocks_(this.workspace_.getBlockById(t.dataset.id))}),this.dragSelect_.subscribe("elementunselect",e=>{let t=e.item.parentElement;n.get(this.workspace_)&&t&&t.dataset&&t.dataset.id&&this.updateBlocks_(this.workspace_.getBlockById(t.dataset.id))}),e&&this.workspace_.getInjectionDiv().dispatchEvent(new KeyboardEvent("keydown",{key:"meta"})),this.updateMultiselectIcon(!0),n.set(this.workspace_,!0)}disableMultiselect(e=!1){n.set(this.workspace_,!1),this.dragSelect_&&(e&&this.workspace_.getInjectionDiv().dispatchEvent(new KeyboardEvent("keyup",{key:"meta"})),this.dragSelect_.stop(),this.dragSelect_=null),!this.blockSelection.size&&i.getSelected()?i.common.setSelected(null):this.blockSelection.size&&!i.getSelected()&&i.common.setSelected(this.workspace_.getBlockById(this.blockSelection.keys().next().value)),this.hasDisableWorkspaceDrag_&&(this.workspace_.options.moveOptions.drag=!0,this.hasDisableWorkspaceDrag_=!1),this.updateMultiselectIcon(!1)}updateMultiselectIcon(e){this.multiselectGroup_&&(this.enabled=e,e?this.multiselectGroup_.firstElementChild.setAttributeNS(i.utils.dom.XLINK_NS,"xlink:href",this.enabled_img):this.multiselectGroup_.firstElementChild.setAttributeNS(i.utils.dom.XLINK_NS,"xlink:href",this.disabled_img))}}i.Css.register(`
.blocklyMultiselect>image, .blocklyMultiselect>svg>image {
  opacity: .2;
}

.blocklyMultiselect>image:hover, .blocklyMultiselect>svg>image:hover {
  opacity: .4;
}

.blocklyMultiselect>image:active, .blocklyMultiselect>svg>image:active {
  opacity: .6;
}
`);/**
 * @license
 * Copyright 2022 MIT
 * SPDX-License-Identifier: Apache-2.0
 */class x{constructor(e){this.workspace_=e,this.origHandleWsStart_=i.Gesture.prototype.handleWsStart,o.set(this.workspace_,new Set),this.blockSelection_=o.get(this.workspace_),n.set(this.workspace_,!1),r.set(this.workspace_,i.BlockDragger),this.useCopyPasteCrossTab_=!0,this.useCopyPasteMenu_=!0}init(e){let t=this.workspace_.getInjectionDiv();if(this.onKeyDownWrapper_=i.browserEvents.conditionalBind(t,"keydown",this,this.onKeyDown_),this.onKeyUpWrapper_=i.browserEvents.conditionalBind(t,"keyup",this,this.onKeyUp_),this.onFocusOutWrapper_=i.browserEvents.conditionalBind(t,"focusout",this,this.onBlur_),t.addEventListener("mouseenter",()=>{this.workspace_.svgGroup_.parentElement.focus()}),this.eventListenerWrapper_=this.eventListener_.bind(this),this.workspace_.addChangeListener(this.eventListenerWrapper_),e.multiselectCopyPaste&&!1===e.multiselectCopyPaste.crossTab&&(this.useCopyPasteCrossTab_=!1),e.multiselectCopyPaste&&!1===e.multiselectCopyPaste.menu&&(this.useCopyPasteMenu_=!1),i.ContextMenuRegistry.registry.registry_.workspaceSelectAll||(f(),A(this.useCopyPasteMenu_,this.useCopyPasteCrossTab_),v(),k(this.useCopyPasteCrossTab_)),this.controls_=new F(this.workspace_,e.multiselectIcon,this),!e.multiselectIcon||!e.multiselectIcon.hideIcon){let e=this.controls_.createDom();this.workspace_.getParentSvg().appendChild(e)}this.controls_.init(),e.useDoubleClick&&this.useDoubleClick_(!0),e.baseBlockDragger&&r.set(this.workspace_,e.baseBlockDragger),e.bumpNeighbours||(this.origBumpNeighbours=i.BlockSvg.prototype.bumpNeighbours,i.BlockSvg.prototype.bumpNeighbours=function(){})}dispose(e=!1){this.onKeyDownWrapper_&&(i.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyUpWrapper_&&(i.browserEvents.unbind(this.onKeyUpWrapper_),this.onKeyUpWrapper_=null),this.onFocusOutWrapper_&&(i.browserEvents.unbind(this.onFocusOutWrapper_),this.onFocusOutWrapper_=null),this.eventListenerWrapper_&&(this.workspace_.removeChangeListener(this.eventListenerWrapper_),this.eventListenerWrapper_=null),e||(f(),this.useCopyPasteMenu_&&(i.ContextMenuRegistry.registry.unregister("blockCopyToStorage"),i.ContextMenuRegistry.registry.unregister("blockPasteFromStorage")),i.ContextMenuRegistry.registry.unregister("workspaceSelectAll"),b(),v(),i.ShortcutRegistry.registry.unregister("selectall"),P()),this.controls_&&(this.controls_.dispose(),this.controls_=null),this.useDoubleClick_(!1),this.origBumpNeighbours&&(i.BlockSvg.prototype.bumpNeighbours=this.origBumpNeighbours)}useDoubleClick_(e){if(!e){i.Gesture.prototype.handleWsStart=this.origHandleWsStart_;return}i.Gesture.prototype.handleWsStart=function(e){if(e.isWrapped)return e;let t=function(t,s){if(e.call(this,t,s),this.targetBlock&&1===t.buttons&&!n.get(s)){let e=function(e){return!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse};if(i.getSelected()&&e(i.getSelected())){if(s.doubleClickPid_&&(clearTimeout(s.doubleClickPid_),s.doubleClickPid_=void 0,i.getSelected().id===s.doubleClickBlock_)){let t=!i.getSelected().isCollapsed(),n=function(s){s&&e(s)&&!d(s)&&s.setCollapsed(t)};i.Events.setGroup(!0);let r=o.get(s);i.getSelected()&&!r.size&&n(i.getSelected()),r.forEach(function(e){let t=s.getBlockById(e);t&&n(t)}),i.Events.setGroup(!1);return}s.doubleClickPid_||(s.doubleClickBlock_=i.getSelected().id,s.doubleClickPid_=setTimeout(function(){s.doubleClickPid_=void 0},500))}}};return t.isWrapped=!0,t}(i.Gesture.prototype.handleWsStart)}eventListener_(e){if(e.type===i.Events.SELECTED)this.controls_.updateMultiselect();else if(e.type===i.Events.CHANGE&&"field"===e.element&&e.recordUndo&&this.blockSelection_.has(e.blockId)){let t=!!e.group;t||(i.Events.setGroup(!0),e.group=i.Events.getGroup());try{let t=this.workspace_.getBlockById(e.blockId).type;this.blockSelection_.forEach(s=>{let i=this.workspace_.getBlockById(s);i.type===t&&i.setFieldValue(e.newValue,e.name)})}finally{t||i.Events.setGroup(!1)}}}onKeyDown_(e){e.keyCode!==i.utils.KeyCodes.SHIFT||n.get(this.workspace_)||this.controls_.enableMultiselect()}onKeyUp_(e){e.keyCode===i.utils.KeyCodes.SHIFT&&this.controls_.disableMultiselect()}onBlur_(){n.get(this.workspace_)&&this.controls_.disableMultiselect()}}/**
 * @license
 * Copyright 2022 MIT
 * SPDX-License-Identifier: Apache-2.0
 */class w extends i.BlockDragger{constructor(e,t){super(e,t),this.block_=e,this.workspace_=t,this.group_="",this.blockDraggers_=new Set,this.origHighlight_=i.RenderedConnection.prototype.highlight,this.BaseBlockDragger=r.get(t),this.origUpdateBlockAfterMove_=this.BaseBlockDragger.prototype.updateBlockAfterMove_,this.blockSelection=o.get(t)}dispose(){super.dispose(),this.blockDraggers_.forEach(e=>{e.dispose()})}startDrag(e,t){if(n.get(this.workspace_))return;let s=[];this.blockSelection.has(this.block_.id)?this.blockSelection.forEach(e=>{let t=this.workspace_.getBlockById(e);if(!t){this.blockSelection.delete(e);return}d(t,!0)||s.push(new this.BaseBlockDragger(t,this.workspace_))}):(this.blockSelection.forEach(e=>{let t=this.workspace_.getBlockById(e);t&&t.pathObject.updateSelected(!1)}),this.blockSelection.clear(),s.push(new this.BaseBlockDragger(this.block_,this.workspace_)),this.block_.pathObject.updateSelected(!0)),s.length>1&&(i.RenderedConnection.prototype.highlight=function(){}),s.forEach(s=>{s.startDrag(e,t),this.blockDraggers_.add(s)})}drag(e,t){this.blockDraggers_.forEach(function(s){s.drag(e,t)}),e.preventDefault(),e.stopPropagation()}endDrag(e,t){this.blockDraggers_.size>1&&this.patchUpdateBlockAfterMove(!0),this.blockDraggers_.forEach(s=>{i.Events.getGroup()?this.group_=i.Events.getGroup():i.Events.setGroup(this.group_),s.endDrag(e,t)}),this.blockDraggers_.size>1&&(i.RenderedConnection.prototype.highlight=this.origHighlight_,this.patchUpdateBlockAfterMove(!1))}moveBlockWhileDragging(e,t){this.blockDraggers_.forEach(function(s){s.moveBlockWhileDragging(e,t)})}patchUpdateBlockAfterMove(e){e?this.BaseBlockDragger.prototype.updateBlockAfterMove_=function(){if(this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()){let e=this.draggedConnectionManager_.activeCandidate.closest;o.get(this.workspace_).has(e.sourceBlock_.id)||d(e.sourceBlock_,!0)?(i.Events.disable(),this.draggedConnectionManager_.hidePreview(),i.Events.enable()):this.draggedConnectionManager_.applyConnections()}this.draggingBlock_.getDescendants(!1).forEach(function(e){e.getChildren().length||e.queueRender()}),this.draggingBlock_.scheduleSnapAndBump()}:this.BaseBlockDragger.prototype.updateBlockAfterMove_=this.origUpdateBlockAfterMove_}getInsertionMarkers(){let e=[];return this.blockDraggers_.forEach(function(t){e.push(...t.getInsertionMarkers())}),e}}i.registry.register(i.registry.Type.BLOCK_DRAGGER,"MultiselectBlockDragger",w);/**
 * @license
 * Copyright 2022 MIT
 * SPDX-License-Identifier: Apache-2.0
 */},4097:function(e,t,s){var i;void 0!==(i=(function(e){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return e}).apply(t,[s(7307)]))&&(e.exports=i)},1003:function(e,t,s){var i;void 0!==(i=(function(e){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return e}).apply(t,[s(6904)]))&&(e.exports=i)},6904:function(e,t,s){var i;void 0!==(i=(function(e){var t=e.__namespace__,s=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]);t.defineBlocks$$module$build$src$core$common(s);var i={};i.blocks=s;var o=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]);o.lists_create_with={init:function(){this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("items",String(this.itemCount_)),e},domToMutation:function(e){if(!(e=e.getAttribute("items")))throw TypeError("element did not have items");this.itemCount_=parseInt(e,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(e){this.itemCount_=e.itemCount,this.updateShape_()},decompose:function(e){let t=e.newBlock("lists_create_with_container");t.initSvg();let s=t.getInput("STACK").connection;for(let t=0;t<this.itemCount_;t++){let t=e.newBlock("lists_create_with_item");if(t.initSvg(),!t.previousConnection)throw Error("itemBlock has no previousConnection");s.connect(t.previousConnection),s=t.nextConnection}return t},compose:function(e){var t=e.getInputTargetBlock("STACK");for(e=[];t;)t.isInsertionMarker()||e.push(t.valueConnection_),t=t.getNextBlock();for(t=0;t<this.itemCount_;t++){let s=this.getInput("ADD"+t).connection.targetConnection;s&&-1===e.indexOf(s)&&s.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),t=0;t<this.itemCount_;t++){let s;null==(s=e[t])||s.reconnect(this,"ADD"+t)}},saveConnections:function(e){e=e.getInputTargetBlock("STACK");let t=0;for(;e;){if(e.isInsertionMarker()){e=e.getNextBlock();continue}let s=this.getInput("ADD"+t);e.valueConnection_=null==s?void 0:s.connection.targetConnection,e=e.getNextBlock(),t++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){let s=this.appendValueInput("ADD"+e).setAlign(t.Align$$module$build$src$core$inputs$align.RIGHT);0===e&&s.appendField(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(e=this.itemCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e)}},o.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},o.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},o.lists_indexOf={init:function(){var e=[[t.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),!(e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e})))throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(e,"END"),this.setInputsInline(!0),this.setTooltip(()=>t.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}},o.lists_getIndex={init:function(){var e=[[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),(e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e})).setValidator(function(e){e="REMOVE"===e,this.getSourceBlock().updateStatement_(e)}),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(e,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{let e=this.getFieldValue("MODE"),s=this.getFieldValue("WHERE"),i="";switch(e+" "+s){case"GET FROM_START":case"GET FROM_END":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"===s||"FROM_END"===s)&&(i+="  "+("FROM_START"===s?t.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),i})},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");e.setAttribute("statement",String(!this.outputConnection));let s=this.getInput("AT") instanceof t.ValueInput$$module$build$src$core$inputs$value_input;return e.setAttribute("at",String(s)),e},domToMutation:function(e){let t="true"===e.getAttribute("statement");this.updateStatement_(t),e="false"!==e.getAttribute("at"),this.updateAt_(e)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(e){e.isStatement?this.updateStatement_(!0):"string"==typeof e&&this.domToMutation(t.textToDom$$module$build$src$core$utils$xml(e))},updateStatement_:function(e){!this.outputConnection!==e&&(this.unplug(!0,!0),e?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");let s=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});s.setValidator(function(t){let s="FROM_START"===t||"FROM_END"===t;if(s!==e){let e=this.getSourceBlock();return e.updateAt_(s),e.setFieldValue(t,"WHERE"),null}}),this.getInput("AT").appendField(s,"WHERE"),t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},o.lists_setIndex={init:function(){var e=[[t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e}),this.appendDummyInput().appendField(e,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{let e=this.getFieldValue("MODE"),s=this.getFieldValue("WHERE"),i="";switch(e+" "+s){case"SET FROM_START":case"SET FROM_END":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"===s||"FROM_END"===s)&&(i+="  "+t.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),i})},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation"),s=this.getInput("AT") instanceof t.ValueInput$$module$build$src$core$inputs$value_input;return e.setAttribute("at",String(s)),e},domToMutation:function(e){e="false"!==e.getAttribute("at"),this.updateAt_(e)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");let s=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});s.setValidator(function(t){let s="FROM_START"===t||"FROM_END"===t;if(s!==e){let e=this.getSourceBlock();return e.updateAt_(s),e.setFieldValue(t,"WHERE"),null}}),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(s,"WHERE")}},o.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");var s=this.getInput("AT1") instanceof t.ValueInput$$module$build$src$core$inputs$value_input;return e.setAttribute("at1",String(s)),s=this.getInput("AT2") instanceof t.ValueInput$$module$build$src$core$inputs$value_input,e.setAttribute("at2",String(s)),e},domToMutation:function(e){let t="true"===e.getAttribute("at1");e="true"===e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(e,s){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),s?(this.appendValueInput("AT"+e).setCheck("Number"),t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e);let i=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+e]});i.setValidator(function(t){let i="FROM_START"===t||"FROM_END"===t;if(i!==s){let s=this.getSourceBlock();return s.updateAt_(e,i),s.setFieldValue(t,"WHERE"+e),null}}),this.getInput("AT"+e).appendField(i,"WHERE"+e),1===e&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},o.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},o.lists_split={init:function(){let e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[t.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!e)throw Error("field_dropdown not found");e.setValidator(e=>{this.updateType_(e)}),this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(e,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{let e=this.getFieldValue("MODE");if("SPLIT"===e)return t.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"===e)return t.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+e)})},updateType_:function(e){if(this.getFieldValue("MODE")!==e){let e=this.getInput("INPUT").connection;e.setShadowDom(null);let t=e.targetBlock();t&&(e.disconnect(),t.isShadow()?t.dispose(!1):this.bumpNeighbours())}"SPLIT"===e?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("mode",this.getFieldValue("MODE")),e},domToMutation:function(e){this.updateType_(e.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},t.defineBlocks$$module$build$src$core$common(o);var n={};n.blocks=o;var r=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);t.register$$module$build$src$core$extensions("logic_op_tooltip",t.buildTooltipForDropdown$$module$build$src$core$extensions("OP",{EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"})),t.registerMutator$$module$build$src$core$extensions("controls_if_mutator",{elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;let e=t.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&e.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&e.setAttribute("else","1"),e},domToMutation:function(e){this.elseifCount_=parseInt(e.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(e.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;let e=Object.create(null);return this.elseifCount_&&(e.elseIfCount=this.elseifCount_),this.elseCount_&&(e.hasElse=!0),e},loadExtraState:function(e){this.elseifCount_=e.elseIfCount||0,this.elseCount_=e.hasElse?1:0,this.updateShape_()},decompose:function(e){let t=e.newBlock("controls_if_if");t.initSvg();let s=t.nextConnection;for(let t=1;t<=this.elseifCount_;t++){let t=e.newBlock("controls_if_elseif");t.initSvg(),s.connect(t.previousConnection),s=t.nextConnection}return this.elseCount_&&((e=e.newBlock("controls_if_else")).initSvg(),s.connect(e.previousConnection)),t},compose:function(e){e=e.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;let t=[null],s=[null],i=null;for(;e;){if(!e.isInsertionMarker())switch(e.type){case"controls_if_elseif":this.elseifCount_++,t.push(e.valueConnection_),s.push(e.statementConnection_);break;case"controls_if_else":this.elseCount_++,i=e.statementConnection_;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(t,s,i)},saveConnections:function(e){e=e.nextConnection.targetBlock();let t=1;for(;e;){if(!e.isInsertionMarker())switch(e.type){case"controls_if_elseif":var s=this.getInput("IF"+t);let i=this.getInput("DO"+t);e.valueConnection_=s&&s.connection.targetConnection,e.statementConnection_=i&&i.connection.targetConnection,t++;break;case"controls_if_else":s=this.getInput("ELSE"),e.statementConnection_=s&&s.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.getNextBlock()}},rebuildShape_:function(){let e=[null],t=[null],s=null;this.getInput("ELSE")&&(s=this.getInput("ELSE").connection.targetConnection);for(let s=1;this.getInput("IF"+s);s++){let i=this.getInput("IF"+s),o=this.getInput("DO"+s);e.push(i.connection.targetConnection),t.push(o.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(e,t,s)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var e=1;this.getInput("IF"+e);e++)this.removeInput("IF"+e),this.removeInput("DO"+e);for(e=1;e<=this.elseifCount_;e++)this.appendValueInput("IF"+e).setCheck("Boolean").appendField(t.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+e).appendField(t.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(e,t,s){for(let s=1;s<=this.elseifCount_;s++){let i,o;null==(i=e[s])||i.reconnect(this,"IF"+s),null==(o=t[s])||o.reconnect(this,"DO"+s)}null==s||s.reconnect(this,"ELSE")}},null,["controls_if_elseif","controls_if_else"]),t.register$$module$build$src$core$extensions("controls_if_tooltip",function(){this.setTooltip((function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1}).bind(this))});var l={onchange:function(e){this.prevBlocks_||(this.prevBlocks_=[null,null]);var s=this.getInputTargetBlock("A");let i=this.getInputTargetBlock("B");s&&i&&!this.workspace.connectionChecker.doTypeChecks(s.outputConnection,i.outputConnection)&&(t.setGroup$$module$build$src$core$events$utils(e.group),(e=this.prevBlocks_[0])!==s&&(s.unplug(),!e||e.isDisposed()||e.isShadow()||this.getInput("A").connection.connect(e.outputConnection)),(s=this.prevBlocks_[1])!==i&&(i.unplug(),!s||s.isDisposed()||s.isShadow()||this.getInput("B").connection.connect(s.outputConnection)),this.bumpNeighbours(),t.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}};t.register$$module$build$src$core$extensions("logic_compare",function(){this.mixin(l)}),t.registerMixin$$module$build$src$core$extensions("logic_ternary",{prevParentConnection_:null,onchange:function(e){let s=this.getInputTargetBlock("THEN"),i=this.getInputTargetBlock("ELSE"),o=this.outputConnection.targetConnection;if((s||i)&&o)for(let n=0;2>n;n++){let r=1===n?s:i;r&&!r.workspace.connectionChecker.doTypeChecks(r.outputConnection,o)&&(t.setGroup$$module$build$src$core$events$utils(e.group),o===this.prevParentConnection_?(this.unplug(),o.getSourceBlock().bumpNeighbours()):(r.unplug(),r.bumpNeighbours()),t.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=o}}),t.defineBlocks$$module$build$src$core$common(r);var a=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]);t.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",t.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",{WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"})),t.register$$module$build$src$core$extensions("controls_flow_tooltip",t.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",{BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"})),t.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",{customContextMenu:function(e){if(!this.isInFlyout){var s=this.getField("VAR").getVariable(),i=s.name;if(!this.isCollapsed()&&null!==i){s=t.generateVariableFieldDom$$module$build$src$core$variables(s);let o=t.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","variables_get"),o.appendChild(s),e.push({enabled:!0,text:t.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",i),callback:t.callbackFactory$$module$build$src$core$contextmenu(this,o)})}}}}),t.register$$module$build$src$core$extensions("controls_for_tooltip",t.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.register$$module$build$src$core$extensions("controls_forEach_tooltip",t.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var u=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]);t.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",{getSurroundLoop:function(){let e=this;do{if(u.has(e.type))return e;e=e.getSurroundParent()}while(e);return null},onchange:function(e){var s=this.workspace;if(s.isDragging&&!s.isDragging()&&e.type===t.MOVE$$module$build$src$core$events$utils&&(s=!!this.getSurroundLoop(),this.setWarningText(s?null:t.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout)){let i=t.getGroup$$module$build$src$core$events$utils();t.setGroup$$module$build$src$core$events$utils(e.group),this.setEnabled(s),t.setGroup$$module$build$src$core$events$utils(i)}}}),t.defineBlocks$$module$build$src$core$common(a);var c={};c.blocks=a,c.loopTypes=u;var _=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]);t.register$$module$build$src$core$extensions("math_op_tooltip",t.buildTooltipForDropdown$$module$build$src$core$extensions("OP",{ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"})),t.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",{mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation"),s="DIVISIBLE_BY"===this.getFieldValue("PROPERTY");return e.setAttribute("divisor_input",String(s)),e},domToMutation:function(e){e="true"===e.getAttribute("divisor_input"),this.updateShape_(e)},updateShape_:function(e){let t=this.getInput("DIVISOR");e?t||this.appendValueInput("DIVISOR").setCheck("Number"):t&&this.removeInput("DIVISOR")}},function(){this.getField("PROPERTY").setValidator(function(e){e="DIVISIBLE_BY"===e,this.getSourceBlock().updateShape_(e)})}),t.register$$module$build$src$core$extensions("math_change_tooltip",t.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",{updateType_:function(e){"MODE"===e?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("op",this.getFieldValue("OP")),e},domToMutation:function(e){if(null===(e=e.getAttribute("op")))throw TypeError("xmlElement had no op attribute");this.updateType_(e)}},function(){this.getField("OP").setValidator((function(e){this.updateType_(e)}).bind(this))}),t.defineBlocks$$module$build$src$core$common(_);var d={};d.blocks=_;var T={},p={setStatements_:function(e){this.hasStatements_!==e&&(e?(this.appendStatementInput("STACK").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=e)},updateParams_:function(){let e="";this.arguments_.length&&(e=t.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.disable$$module$build$src$core$events$utils();try{this.setFieldValue(e,"PARAMS")}finally{t.enable$$module$build$src$core$events$utils()}},mutationToDom:function(e){let s=t.createElement$$module$build$src$core$utils$xml("mutation");e&&s.setAttribute("name",this.getFieldValue("NAME"));for(let i=0;i<this.argumentVarModels_.length;i++){let o=t.createElement$$module$build$src$core$utils$xml("arg"),n=this.argumentVarModels_[i];o.setAttribute("name",n.name),o.setAttribute("varid",n.getId()),e&&this.paramIds_&&o.setAttribute("paramId",this.paramIds_[i]),s.appendChild(o)}return this.hasStatements_||s.setAttribute("statements","false"),s},domToMutation:function(e){this.arguments_=[],this.argumentVarModels_=[];for(let i=0,o;o=e.childNodes[i];i++)if("arg"===o.nodeName.toLowerCase()){var s=o;let e=s.getAttribute("name");s=s.getAttribute("varid")||s.getAttribute("varId"),this.arguments_.push(e),null!==(s=t.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,s,e,""))?this.argumentVarModels_.push(s):console.log(`Failed to create a variable named "${e}", ignoring.`)}this.updateParams_(),t.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_("false"!==e.getAttribute("statements"))},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;let e=Object.create(null);if(this.argumentVarModels_.length){e.params=[];for(let t=0;t<this.argumentVarModels_.length;t++)e.params.push({name:this.argumentVarModels_[t].name,id:this.argumentVarModels_[t].getId()})}return this.hasStatements_||(e.hasStatements=!1),e},loadExtraState:function(e){if(this.arguments_=[],this.argumentVarModels_=[],e.params)for(let i=0;i<e.params.length;i++){var s=e.params[i];s=t.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,s.id,s.name,""),this.arguments_.push(s.name),this.argumentVarModels_.push(s)}this.updateParams_(),t.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(!1!==e.hasStatements)},decompose:function(e){let s=t.createElement$$module$build$src$core$utils$xml("block");s.setAttribute("type","procedures_mutatorcontainer");var i=t.createElement$$module$build$src$core$utils$xml("statement");i.setAttribute("name","STACK"),s.appendChild(i);for(let e=0;e<this.arguments_.length;e++){let s=t.createElement$$module$build$src$core$utils$xml("block");s.setAttribute("type","procedures_mutatorarg");var o=t.createElement$$module$build$src$core$utils$xml("field");o.setAttribute("name","NAME");let n=t.createTextNode$$module$build$src$core$utils$xml(this.arguments_[e]);o.appendChild(n),s.appendChild(o),o=t.createElement$$module$build$src$core$utils$xml("next"),s.appendChild(o),i.appendChild(s),i=o}return e=t.domToBlock$$module$build$src$core$xml(s,e),"procedures_defreturn"===this.type?e.setFieldValue(this.hasStatements_,"STATEMENTS"):e.removeInput("STATEMENT_INPUT"),t.mutateCallers$$module$build$src$core$procedures(this),e},compose:function(e){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let s=e.getInputTargetBlock("STACK");for(;s&&!s.isInsertionMarker();){var i,o=s.getFieldValue("NAME");this.arguments_.push(o),o=this.workspace.getVariable(o,""),this.argumentVarModels_.push(o),this.paramIds_.push(s.id),s=s.nextConnection&&s.nextConnection.targetBlock()}this.updateParams_(),t.mutateCallers$$module$build$src$core$procedures(this),null!==(e=e.getFieldValue("STATEMENTS"))&&(e="TRUE"===e,this.hasStatements_!==e)&&(e?(this.setStatements_(!0),null==(i=this.statementConnection_)||i.reconnect(this,"STACK"),this.statementConnection_=null):(i=this.getInput("STACK").connection,(this.statementConnection_=i.targetConnection)&&((i=i.targetBlock()).unplug(),i.bumpNeighbours()),this.setStatements_(!1)))},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(e,s){var i=this.workspace.getVariableById(e);if(""===i.type){i=i.name,s=this.workspace.getVariableById(s);var o=!1;for(let t=0;t<this.argumentVarModels_.length;t++)this.argumentVarModels_[t].getId()===e&&(this.arguments_[t]=s.name,this.argumentVarModels_[t]=s,o=!0);o&&(this.displayRenamedVar_(i,s.name),t.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(e){let s=e.name,i=!1,o;for(let t=0;t<this.argumentVarModels_.length;t++)this.argumentVarModels_[t].getId()===e.getId()&&(o=this.arguments_[t],this.arguments_[t]=s,i=!0);i&&(this.displayRenamedVar_(o,s),t.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(e,s){this.updateParams_();var i=this.getIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(i&&i.bubbleIsVisible()){i=i.getWorkspace().getAllBlocks(!1);for(let o=0,n;n=i[o];o++)"procedures_mutatorarg"===n.type&&t.Names$$module$build$src$core$names.equals(e,n.getFieldValue("NAME"))&&n.setFieldValue(s,"NAME")}},customContextMenu:function(e){if(!this.isInFlyout){var s=this.getFieldValue("NAME"),i=t.createElement$$module$build$src$core$utils$xml("mutation");i.setAttribute("name",s);for(var o=0;o<this.arguments_.length;o++){var n=t.createElement$$module$build$src$core$utils$xml("arg");n.setAttribute("name",this.arguments_[o]),i.appendChild(n)}if((o=t.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type",this.callType_),o.appendChild(i),e.push({enabled:!0,text:t.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",s),callback:t.callbackFactory$$module$build$src$core$contextmenu(this,o)}),!this.isCollapsed())for(s=0;s<this.argumentVarModels_.length;s++)i=this.argumentVarModels_[s],o=t.generateVariableFieldDom$$module$build$src$core$variables(i),(n=t.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type","variables_get"),n.appendChild(o),e.push({enabled:!0,text:t.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",i.name),callback:t.callbackFactory$$module$build$src$core$contextmenu(this,n)})}}};T.procedures_defnoreturn=Object.assign({},p,{init:function(){var e=t.findLegalName$$module$build$src$core$procedures("",this);(e=t.fromJson$$module$build$src$core$field_registry({type:"field_input",text:e})).setValidator(t.rename$$module$build$src$core$procedures),e.setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),T.procedures_defreturn=Object.assign({},p,{init:function(){var e=t.findLegalName$$module$build$src$core$procedures("",this);(e=t.fromJson$$module$build$src$core$field_registry({type:"field_input",text:e})).setValidator(t.rename$$module$build$src$core$procedures),e.setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.Align$$module$build$src$core$inputs$input.RIGHT).appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"}),T.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(t.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},T.procedures_mutatorarg={init:function(){let e=t.fromJson$$module$build$src$core$field_registry({type:"field_input",text:t.DEFAULT_ARG$$module$build$src$core$procedures});e.setValidator(this.validator_),e.oldShowEditorFn_=e.showEditor_,e.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(e,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,e.onFinishEditing_=this.deleteIntermediateVars_,e.createdVariables_=[],e.onFinishEditing_("x")},validator_:function(e){var t=this.getSourceBlock();let s=t.workspace.getRootWorkspace();if(!(e=e.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;let i=(t.workspace.targetWorkspace||t.workspace).getAllBlocks(!1),o=e.toLowerCase();for(let e=0;e<i.length;e++){if(i[e].id===this.getSourceBlock().id)continue;let t=i[e].getFieldValue("NAME");if(t&&t.toLowerCase()===o)return null}return t.isInFlyout||((t=s.getVariable(e,""))&&t.name!==e&&s.renameVariableById(t.getId(),e),t||(t=s.createVariable(e,""))&&this.createdVariables_&&this.createdVariables_.push(t)),e},deleteIntermediateVars_:function(e){let t=this.getSourceBlock().workspace.getRootWorkspace();if(t)for(let s=0;s<this.createdVariables_.length;s++){let i=this.createdVariables_[s];i.name!==e&&t.deleteVariableById(i.getId())}}};var g={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(e,s){t.Names$$module$build$src$core$names.equals(e,this.getProcedureCall())&&(this.setFieldValue(s,"NAME"),this.setTooltip((this.outputConnection?t.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",s)))},setProcedureParameters_:function(e,s){var i=t.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((i=(i=i&&i.getIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&i.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),e.join("\n")===this.arguments_.join("\n"))this.quarkIds_=s;else{if(s.length!==e.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let e=0;e<this.arguments_.length;e++){var o=this.getInput("ARG"+e);o&&(o=o.connection.targetConnection,this.quarkConnections_[this.quarkIds_[e]]=o,i&&o&&-1===s.indexOf(this.quarkIds_[e])&&(o.disconnect(),o.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(e),this.argumentVarModels_=[],e=0;e<this.arguments_.length;e++)i=t.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[e],""),this.argumentVarModels_.push(i);if(this.updateShape_(),this.quarkIds_=s){for(s=0;s<this.arguments_.length;s++)if((e=this.quarkIds_[s])in this.quarkConnections_){let t;(null==(t=this.quarkConnections_[e])?0:t.reconnect(this,"ARG"+s))||delete this.quarkConnections_[e]}}}},updateShape_:function(){for(var e=0;e<this.arguments_.length;e++){var s=this.getField("ARGNAME"+e);if(s){t.disable$$module$build$src$core$events$utils();try{s.setValue(this.arguments_[e])}finally{t.enable$$module$build$src$core$events$utils()}}else s=t.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[e]}),this.appendValueInput("ARG"+e).setAlign(t.Align$$module$build$src$core$inputs$input.RIGHT).appendField(s,"ARGNAME"+e).init()}for(e=this.arguments_.length;this.getInput("ARG"+e);e++)this.removeInput("ARG"+e);(e=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(e.appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),e.init()):this.getField("WITH")&&e.removeField("WITH"))},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");e.setAttribute("name",this.getProcedureCall());for(let s=0;s<this.arguments_.length;s++){let i=t.createElement$$module$build$src$core$utils$xml("arg");i.setAttribute("name",this.arguments_[s]),e.appendChild(i)}return e},domToMutation:function(e){var t=e.getAttribute("name");this.renameProcedure(this.getProcedureCall(),t),t=[];let s=[];for(let i=0,o;o=e.childNodes[i];i++)"arg"===o.nodeName.toLowerCase()&&(t.push(o.getAttribute("name")),s.push(o.getAttribute("paramId")));this.setProcedureParameters_(t,s)},saveExtraState:function(){let e=Object.create(null);return e.name=this.getProcedureCall(),this.arguments_.length&&(e.params=this.arguments_),e},loadExtraState:function(e){if(this.renameProcedure(this.getProcedureCall(),e.name),e=e.params){let t=[];t.length=e.length,t.fill(null),this.setProcedureParameters_(e,t)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(e){if(this.workspace&&!this.workspace.isFlyout&&e.recordUndo){if(e.type===t.CREATE$$module$build$src$core$events$utils&&-1!==e.ids.indexOf(this.id)){var s=this.getProcedureCall();if((s=t.getDefinition$$module$build$src$core$procedures(s,this.workspace))&&(s.type!==this.defType_||JSON.stringify(s.getVars())!==JSON.stringify(this.arguments_))&&(s=null),!s){t.setGroup$$module$build$src$core$events$utils(e.group),e=t.createElement$$module$build$src$core$utils$xml("xml"),(s=t.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type",this.defType_);var i=this.getRelativeToSurfaceXY(),o=i.y+2*t.config$$module$build$src$core$config.snapRadius;s.setAttribute("x",`${i.x+t.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),s.setAttribute("y",`${o}`),i=this.mutationToDom(),s.appendChild(i),(i=t.createElement$$module$build$src$core$utils$xml("field")).setAttribute("name","NAME"),o=this.getProcedureCall();let n=t.findLegalName$$module$build$src$core$procedures(o,this);o!==n&&this.renameProcedure(o,n),i.appendChild(t.createTextNode$$module$build$src$core$utils$xml(o)),s.appendChild(i),e.appendChild(s),t.domToWorkspace$$module$build$src$core$xml(e,this.workspace),t.setGroup$$module$build$src$core$events$utils(!1)}}else e.type===t.DELETE$$module$build$src$core$events$utils?(s=this.getProcedureCall(),t.getDefinition$$module$build$src$core$procedures(s,this.workspace)||(t.setGroup$$module$build$src$core$events$utils(e.group),this.dispose(!0),t.setGroup$$module$build$src$core$events$utils(!1))):e.type===t.CHANGE$$module$build$src$core$events$utils&&"disabled"===e.element&&(s=this.getProcedureCall(),(s=t.getDefinition$$module$build$src$core$procedures(s,this.workspace))&&s.id===e.blockId&&((s=t.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),t.setGroup$$module$build$src$core$events$utils(e.group),e.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),t.setGroup$$module$build$src$core$events$utils(s)))}},customContextMenu:function(e){if(this.workspace.isMovable()){var s=this.getProcedureCall(),i=this.workspace;e.push({enabled:!0,text:t.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){let e=t.getDefinition$$module$build$src$core$procedures(s,i);e&&(i.centerOnBlock(e.id),e.select())}})}}};T.procedures_callnoreturn=Object.assign({},g,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),T.procedures_callreturn=Object.assign({},g,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"}),T.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("value",String(Number(this.hasReturnValue_))),e},domToMutation:function(e){this.hasReturnValue_="1"===e.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(e){if(!(this.workspace.isDragging&&this.workspace.isDragging()||e.type!==t.MOVE$$module$build$src$core$events$utils)){var s=!1,i=this;do{if(-1!==this.FUNCTION_TYPES.indexOf(i.type)){s=!0;break}i=i.getSurroundParent()}while(i);s?("procedures_defnoreturn"===i.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!==i.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(t.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(i=t.getGroup$$module$build$src$core$events$utils(),t.setGroup$$module$build$src$core$events$utils(e.group),this.setEnabled(s),t.setGroup$$module$build$src$core$events$utils(i))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.defineBlocks$$module$build$src$core$common(T);var h={};h.blocks=T;var E=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xb6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]);E.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");var s=this.getInput("AT1") instanceof t.ValueInput$$module$build$src$core$inputs$value_input;return e.setAttribute("at1",`${s}`),s=this.getInput("AT2") instanceof t.ValueInput$$module$build$src$core$inputs$value_input,e.setAttribute("at2",`${s}`),e},domToMutation:function(e){let t="true"===e.getAttribute("at1");e="true"===e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},updateAt_:function(e,s){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),s?(this.appendValueInput("AT"+e).setCheck("Number"),t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e),2===e&&t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL));let i=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+e]});i.setValidator(function(t){let i="FROM_START"===t||"FROM_END"===t;if(i!==s){let s=this.getSourceBlock();return s.updateAt_(e,i),s.setFieldValue(t,"WHERE"+e),null}}),this.getInput("AT"+e).appendField(i,"WHERE"+e),1===e&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},E.text_changeCase={init:function(){let e=[[t.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},E.text_trim={init:function(){let e=[[t.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},E.text_print={init:function(){this.jsonInit({message0:t.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var m={updateType_:function(e){this.outputConnection.setCheck("NUMBER"===e?"Number":"String")},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("type",this.getFieldValue("TYPE")),e},domToMutation:function(e){this.updateType_(e.getAttribute("type"))}};E.text_prompt_ext=Object.assign({},m,{init:function(){var e=[[t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),(e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e})).setValidator(e=>{this.updateType_(e)}),this.appendValueInput("TEXT").appendField(e,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>"TEXT"===this.getFieldValue("TYPE")?t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});var S=Object.assign({},m,{init:function(){this.mixin(I);var e=[[t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),(e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e})).setValidator(e=>{this.updateType_(e)}),this.appendDummyInput().appendField(e,"TYPE").appendField(this.newQuote_(!0)).appendField(t.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>"TEXT"===this.getFieldValue("TYPE")?t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}});E.text_prompt=S,E.text_count={init:function(){this.jsonInit({message0:t.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},E.text_replace={init:function(){this.jsonInit({message0:t.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},E.text_reverse={init:function(){this.jsonInit({message0:t.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var I={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(e){for(let t=0,s;s=this.inputList[t];t++)for(let t=0,i;i=s.fieldRow[t];t++)if(e===i.name){s.insertFieldAt(t,this.newQuote_(!0)),s.insertFieldAt(t+2,this.newQuote_(!1));return}console.warn('field named "'+e+'" not found in '+this.toDevString())},newQuote_:function(e){return e=this.RTL?!e:e,t.fromJson$$module$build$src$core$field_registry({type:"field_image",src:e?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:e?"":""})}};t.register$$module$build$src$core$extensions("text_append_tooltip",t.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.register$$module$build$src$core$extensions("text_indexOf_tooltip",function(){this.setTooltip(()=>t.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}),t.register$$module$build$src$core$extensions("text_quotes",function(){this.mixin(I),this.quoteField_("TEXT")}),t.registerMutator$$module$build$src$core$extensions("text_join_mutator",{itemCount_:0,mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("items",`${this.itemCount_}`),e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(e){this.itemCount_=e.itemCount,this.updateShape_()},decompose:function(e){let t=e.newBlock("text_create_join_container");t.initSvg();let s=t.getInput("STACK").connection;for(let t=0;t<this.itemCount_;t++){let t=e.newBlock("text_create_join_item");t.initSvg(),s.connect(t.previousConnection),s=t.nextConnection}return t},compose:function(e){var t=e.getInputTargetBlock("STACK");for(e=[];t;)t.isInsertionMarker()||e.push(t.valueConnection_),t=t.getNextBlock();for(t=0;t<this.itemCount_;t++){let s=this.getInput("ADD"+t).connection.targetConnection;s&&-1===e.indexOf(s)&&s.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),t=0;t<this.itemCount_;t++){let s;null==(s=e[t])||s.reconnect(this,"ADD"+t)}},saveConnections:function(e){e=e.getInputTargetBlock("STACK");let t=0;for(;e;){if(e.isInsertionMarker()){e=e.getNextBlock();continue}let s=this.getInput("ADD"+t);e.valueConnection_=s&&s.connection.targetConnection,e=e.getNextBlock(),t++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){let s=this.appendValueInput("ADD"+e).setAlign(t.Align$$module$build$src$core$inputs$align.RIGHT);0===e&&s.appendField(t.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(e=this.itemCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e)}},function(){this.mixin(I),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))}),t.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",{isAt_:!1,mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("at",`${this.isAt_}`),e},domToMutation:function(e){e="false"!==e.getAttribute("at"),this.updateAt_(e)},updateAt_:function(e){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),e&&(this.appendValueInput("AT").setCheck("Number"),t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),t.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=e}},function(){this.getField("WHERE").setValidator(function(e){e="FROM_START"===e||"FROM_END"===e;let t=this.getSourceBlock();e!==t.isAt_&&t.updateAt_(e)}),this.updateAt_(!0),this.setTooltip(()=>{var e=this.getFieldValue("WHERE");let s=t.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"===e||"FROM_END"===e)&&(e="FROM_START"===e?t.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(s+="  "+e.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),s})}),t.defineBlocks$$module$build$src$core$common(E);var $={};$.blocks=E;var O=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);t.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",{customContextMenu:function(e){if(this.isInFlyout){var s,i;("variables_get"===this.type||"variables_get_reporter"===this.type)&&(o={text:t.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:(s=this,function(){let e=s.workspace,i=s.getField("VAR").getVariable();t.renameVariable$$module$build$src$core$variables(e,i)})},n=this.getField("VAR").getText(),n={text:t.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",n),enabled:!0,callback:(i=this,function(){let e=i.workspace,t=i.getField("VAR").getVariable();e.deleteVariableById(t.getId()),e.refreshToolboxSelection()})},e.unshift(o),e.unshift(n))}else{if("variables_get"===this.type)var o="variables_set",n=t.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else o="variables_get",n=t.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;let s=this.getField("VAR").getText(),i=t.createElement$$module$build$src$core$utils$xml("field");i.setAttribute("name","VAR"),i.appendChild(t.createTextNode$$module$build$src$core$utils$xml(s));let r=t.createElement$$module$build$src$core$utils$xml("block");r.setAttribute("type",o),r.appendChild(i),e.push({enabled:0<this.workspace.remainingCapacity(),text:n.replace("%1",s),callback:t.callbackFactory$$module$build$src$core$contextmenu(this,r)})}}}),t.defineBlocks$$module$build$src$core$common(O);var L={};L.blocks=O;var R=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);t.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",{customContextMenu:function(e){if(this.isInFlyout){var s,i;("variables_get_dynamic"===this.type||"variables_get_reporter_dynamic"===this.type)&&(o={text:t.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:(s=this,function(){let e=s.workspace,i=s.getField("VAR").getVariable();t.renameVariable$$module$build$src$core$variables(e,i)})},r=this.getField("VAR").getText(),r={text:t.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",r),enabled:!0,callback:(i=this,function(){let e=i.workspace,t=i.getField("VAR").getVariable();e.deleteVariableById(t.getId()),e.refreshToolboxSelection()})},e.unshift(o),e.unshift(r))}else{var o=this.getFieldValue("VAR"),n=this.workspace.getVariableById(o).type;if("variables_get_dynamic"===this.type){o="variables_set_dynamic";var r=t.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET}else o="variables_get_dynamic",r=t.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;let s=this.getField("VAR").getText(),i=t.createElement$$module$build$src$core$utils$xml("field");i.setAttribute("name","VAR"),i.setAttribute("variabletype",n),i.appendChild(t.createTextNode$$module$build$src$core$utils$xml(s)),(n=t.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type",o),n.appendChild(i),e.push({enabled:0<this.workspace.remainingCapacity(),text:r.replace("%1",s),callback:t.callbackFactory$$module$build$src$core$contextmenu(this,n)})}},onchange:function(e){e=this.getFieldValue("VAR"),e=t.getVariable$$module$build$src$core$variables(this.workspace,e),"variables_get_dynamic"===this.type?this.outputConnection.setCheck(e.type):this.getInput("VALUE").connection.setCheck(e.type)}}),t.defineBlocks$$module$build$src$core$common(R);var f={};f.blocks=R;var b=Object.assign({},s,o,r,a,_,T,O,R),A={};return A.blocks=b,A.colour=i,A.lists=n,A.loops=c,A.math=d,A.procedures=h,A.texts=$,A.variables=L,A.variablesDynamic=f,A.__namespace__=t,A}).apply(t,[s(7307)]))&&(e.exports=i)},6421:function(e,t,s){var i;void 0!==(i=(function(e,t,s,i){return e.setLocale(t),e}).apply(t,[s(8256),s(9177),s(1003),s(5466)]))&&(e.exports=i)},8256:function(e,t,s){var i;void 0!==(i=(function(e){return e}).apply(t,[s(4097)]))&&(e.exports=i)},4948:function(e,t,s){var i;void 0!==(i=(function(e){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return e}).apply(t,[s(6421)]))&&(e.exports=i)},5466:function(e,t,s){var i;void 0!==(i=(function(e,t){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return t}).apply(t,[s(8256),s(9274)]))&&(e.exports=i)},9274:function(e,t,s){var i;void 0!==(i=(function(e){var t=e.__namespace__,s=function(e,t){var s=0;let i="";t.STATEMENT_PREFIX&&(i+=t.injectId(t.STATEMENT_PREFIX,e));do{let o=t.valueToCode(e,"IF"+s,u.NONE)||"false",n=t.statementToCode(e,"DO"+s);t.STATEMENT_SUFFIX&&(n=t.prefixLines(t.injectId(t.STATEMENT_SUFFIX,e),t.INDENT)+n),i+=(0<s?" else ":"")+"if ("+o+") {\n"+n+"}",s++}while(e.getInput("IF"+s));return(e.getInput("ELSE")||t.STATEMENT_SUFFIX)&&(s=t.statementToCode(e,"ELSE"),t.STATEMENT_SUFFIX&&(s=t.prefixLines(t.injectId(t.STATEMENT_SUFFIX,e),t.INDENT)+s),i+=" else {\n"+s+"}"),i+"\n"},i=function(e,s){let i;i=e.getField("TIMES")?String(Number(e.getFieldValue("TIMES"))):s.valueToCode(e,"TIMES",u.ASSIGNMENT)||"0";let o=s.statementToCode(e,"DO");o=s.addLoopTrap(o,e),e="";let n=s.nameDB_.getDistinctName("count",t.NameType$$module$build$src$core$names.VARIABLE),r=i;return i.match(/^\w+$/)||t.isNumber$$module$build$src$core$utils$string(i)||(e+="var "+(r=s.nameDB_.getDistinctName("repeat_end",t.NameType$$module$build$src$core$names.VARIABLE))+" = "+i+";\n"),e+("for (var "+n+" = 0; "+n+" < "+r+"; "+n)+"++) {\n"+o+"}\n"},o=function(e,t){let s;let i=e.getFieldValue("OP");if("NEG"===i)return"-"===(e=t.valueToCode(e,"NUM",u.UNARY_NEGATION)||"0")[0]&&(e=" "+e),["-"+e,u.UNARY_NEGATION];switch(e="SIN"===i||"COS"===i||"TAN"===i?t.valueToCode(e,"NUM",u.DIVISION)||"0":t.valueToCode(e,"NUM",u.NONE)||"0",i){case"ABS":s="Math.abs("+e+")";break;case"ROOT":s="Math.sqrt("+e+")";break;case"LN":s="Math.log("+e+")";break;case"EXP":s="Math.exp("+e+")";break;case"POW10":s="Math.pow(10,"+e+")";break;case"ROUND":s="Math.round("+e+")";break;case"ROUNDUP":s="Math.ceil("+e+")";break;case"ROUNDDOWN":s="Math.floor("+e+")";break;case"SIN":s="Math.sin("+e+" / 180 * Math.PI)";break;case"COS":s="Math.cos("+e+" / 180 * Math.PI)";break;case"TAN":s="Math.tan("+e+" / 180 * Math.PI)"}if(s)return[s,u.FUNCTION_CALL];switch(i){case"LOG10":s="Math.log("+e+") / Math.log(10)";break;case"ASIN":s="Math.asin("+e+") / Math.PI * 180";break;case"ACOS":s="Math.acos("+e+") / Math.PI * 180";break;case"ATAN":s="Math.atan("+e+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+i)}return[s,u.DIVISION]},n=function(e,s){let i=s.nameDB_.getName(e.getFieldValue("NAME"),t.NameType$$module$build$src$core$names.PROCEDURE);var o="";s.STATEMENT_PREFIX&&(o+=s.injectId(s.STATEMENT_PREFIX,e)),s.STATEMENT_SUFFIX&&(o+=s.injectId(s.STATEMENT_SUFFIX,e)),o&&(o=s.prefixLines(o,s.INDENT));let n="";s.INFINITE_LOOP_TRAP&&(n=s.prefixLines(s.injectId(s.INFINITE_LOOP_TRAP,e),s.INDENT));let r=s.statementToCode(e,"STACK"),l=s.valueToCode(e,"RETURN",u.NONE)||"",a="";r&&l&&(a=o),l&&(l=s.INDENT+"return "+l+";\n");let c=[],_=e.getVars();for(let e=0;e<_.length;e++)c[e]=s.nameDB_.getName(_[e],t.NameType$$module$build$src$core$names.VARIABLE);return o="function "+i+"("+c.join(", ")+") {\n"+o+n+r+a+l+"}",o=s.scrub_(e,o),s.definitions_["%"+i]=o,null},r=function(e,t){return t="window.prompt("+(e.getField("TEXT")?t.quote_(e.getFieldValue("TEXT")):t.valueToCode(e,"TEXT",u.NONE)||"''")+")","NUMBER"===e.getFieldValue("TYPE")&&(t="Number("+t+")"),[t,u.FUNCTION_CALL]},l=function(e,s){return[s.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE),u.ATOMIC]},a=function(e,s){let i=s.valueToCode(e,"VALUE",u.ASSIGNMENT)||"0";return s.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE)+" = "+i+";\n"},u={ATOMIC:0,NEW:1.1,MEMBER:1.2,FUNCTION_CALL:2,INCREMENT:3,DECREMENT:3,BITWISE_NOT:4.1,UNARY_PLUS:4.2,UNARY_NEGATION:4.3,LOGICAL_NOT:4.4,TYPEOF:4.5,VOID:4.6,DELETE:4.7,AWAIT:4.8,EXPONENTIATION:5,MULTIPLICATION:5.1,DIVISION:5.2,MODULUS:5.3,SUBTRACTION:6.1,ADDITION:6.2,BITWISE_SHIFT:7,RELATIONAL:8,IN:8,INSTANCEOF:8,EQUALITY:9,BITWISE_AND:10,BITWISE_XOR:11,BITWISE_OR:12,LOGICAL_AND:13,LOGICAL_OR:14,CONDITIONAL:15,ASSIGNMENT:16,YIELD:17,COMMA:18,NONE:99},c=class extends t.CodeGenerator$$module$build$src$core$generator{constructor(e){for(let t in super(null!=e?e:"JavaScript"),this.ORDER_OVERRIDES=[[u.FUNCTION_CALL,u.MEMBER],[u.FUNCTION_CALL,u.FUNCTION_CALL],[u.MEMBER,u.MEMBER],[u.MEMBER,u.FUNCTION_CALL],[u.LOGICAL_NOT,u.LOGICAL_NOT],[u.MULTIPLICATION,u.MULTIPLICATION],[u.ADDITION,u.ADDITION],[u.LOGICAL_AND,u.LOGICAL_AND],[u.LOGICAL_OR,u.LOGICAL_OR]],this.isInitialized=!1,u)this["ORDER_"+t]=u[t];this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(e){super.init(e),this.nameDB_?this.nameDB_.reset():this.nameDB_=new t.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(e.getVariableMap()),this.nameDB_.populateVariables(e),this.nameDB_.populateProcedures(e);let s=[];var i=t.allDeveloperVariables$$module$build$src$core$variables(e);for(let e=0;e<i.length;e++)s.push(this.nameDB_.getName(i[e],t.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(i=0,e=t.allUsedVarModels$$module$build$src$core$variables(e);i<e.length;i++)s.push(this.nameDB_.getName(e[i].getId(),t.NameType$$module$build$src$core$names.VARIABLE));s.length&&(this.definitions_.variables="var "+s.join(", ")+";"),this.isInitialized=!0}finish(e){let t=Object.values(this.definitions_);return super.finish(e),this.isInitialized=!1,this.nameDB_.reset(),t.join("\n\n")+"\n\n\n"+e}scrubNakedValue(e){return e+";\n"}quote_(e){return"'"+(e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"}multiline_quote_(e){return e.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")}scrub_(e,s,i){let o="";if(!e.outputConnection||!e.outputConnection.targetConnection){var n=e.getCommentText();n&&(n=t.wrap$$module$build$src$core$utils$string(n,this.COMMENT_WRAP-3),o+=this.prefixLines(n+"\n","// "));for(let s=0;s<e.inputList.length;s++)e.inputList[s].type===t.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(n=e.inputList[s].connection.targetBlock())&&(n=this.allNestedComments(n))&&(o+=this.prefixLines(n,"// "))}return e=e.nextConnection&&e.nextConnection.targetBlock(),o+s+(i=i?"":this.blockToCode(e))}getAdjusted(e,s,i,o,n){i=i||0,n=n||this.ORDER_NONE,e.workspace.options.oneBasedIndex&&i--;let r=e.workspace.options.oneBasedIndex?"1":"0",l,a=n;return 0<i?l=a=this.ORDER_ADDITION:0>i?l=a=this.ORDER_SUBTRACTION:o&&(l=a=this.ORDER_UNARY_NEGATION),e=this.valueToCode(e,s,a)||r,t.isNumber$$module$build$src$core$utils$string(e)?(e=Number(e)+i,o&&(e=-e)):(0<i?e=e+" + "+i:0>i&&(e=e+" - "+-i),o&&(e=i?"-("+e+")":"-"+e),l=Math.floor(l),n=Math.floor(n),l&&n>=l&&(e="("+e+")")),e}},_={};_.JavascriptGenerator=c,_.Order=u;var d={};d.colour_blend=function(e,t){let s=t.valueToCode(e,"COLOUR1",u.NONE)||"'#000000'",i=t.valueToCode(e,"COLOUR2",u.NONE)||"'#000000'";return e=t.valueToCode(e,"RATIO",u.NONE)||.5,[t.provideFunction_("colourBlend",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+s+", "+i+", "+e+")",u.FUNCTION_CALL]},d.colour_picker=function(e,t){return[t.quote_(e.getFieldValue("COLOUR")),u.ATOMIC]},d.colour_random=function(e,t){return[t.provideFunction_("colourRandom",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",u.FUNCTION_CALL]},d.colour_rgb=function(e,t){let s=t.valueToCode(e,"RED",u.NONE)||0,i=t.valueToCode(e,"GREEN",u.NONE)||0;return e=t.valueToCode(e,"BLUE",u.NONE)||0,[t.provideFunction_("colourRgb",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+s+", "+i+", "+e+")",u.FUNCTION_CALL]};var T=function(e,t,s){return"FIRST"===t?"0":"FROM_END"===t?e+".length - 1 - "+s:"LAST"===t?e+".length - 1":s},p={};p.lists_create_empty=function(e,t){return["[]",u.ATOMIC]},p.lists_create_with=function(e,t){let s=Array(e.itemCount_);for(let i=0;i<e.itemCount_;i++)s[i]=t.valueToCode(e,"ADD"+i,u.NONE)||"null";return["["+s.join(", ")+"]",u.ATOMIC]},p.lists_getIndex=function(e,t){let s=e.getFieldValue("MODE")||"GET",i=e.getFieldValue("WHERE")||"FROM_START";var o=t.valueToCode(e,"VALUE","RANDOM"===i?u.NONE:u.MEMBER)||"[]";switch(i){case"FIRST":if("GET"===s)return[o+"[0]",u.MEMBER];if("GET_REMOVE"===s)return[o+".shift()",u.MEMBER];if("REMOVE"===s)return o+".shift();\n";break;case"LAST":if("GET"===s)return[o+".slice(-1)[0]",u.MEMBER];if("GET_REMOVE"===s)return[o+".pop()",u.MEMBER];if("REMOVE"===s)return o+".pop();\n";break;case"FROM_START":if(e=t.getAdjusted(e,"AT"),"GET"===s)return[o+"["+e+"]",u.MEMBER];if("GET_REMOVE"===s)return[o+".splice("+e+", 1)[0]",u.FUNCTION_CALL];if("REMOVE"===s)return o+".splice("+e+", 1);\n";break;case"FROM_END":if(e=t.getAdjusted(e,"AT",1,!0),"GET"===s)return[o+".slice("+e+")[0]",u.FUNCTION_CALL];if("GET_REMOVE"===s)return[o+".splice("+e+", 1)[0]",u.FUNCTION_CALL];if("REMOVE"===s)return o+".splice("+e+", 1);";break;case"RANDOM":if(o=t.provideFunction_("listsGetRandomItem",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+o+", "+("GET"!==s)+")","GET"===s||"GET_REMOVE"===s)return[o,u.FUNCTION_CALL];if("REMOVE"===s)return o+";\n"}throw Error("Unhandled combination (lists_getIndex).")},p.lists_getSublist=function(e,t){var s=t.valueToCode(e,"LIST",u.MEMBER)||"[]",i=e.getFieldValue("WHERE1");let o=e.getFieldValue("WHERE2");if("FIRST"===i&&"LAST"===o)s+=".slice(0)";else if(s.match(/^\w+$/)||"FROM_END"!==i&&"FROM_START"===o){switch(i){case"FROM_START":i=t.getAdjusted(e,"AT1");break;case"FROM_END":i=s+".length - "+(i=t.getAdjusted(e,"AT1",1,!1,u.SUBTRACTION));break;case"FIRST":i="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(o){case"FROM_START":t=t.getAdjusted(e,"AT2",1);break;case"FROM_END":t=s+".length - "+(t=t.getAdjusted(e,"AT2",0,!1,u.SUBTRACTION));break;case"LAST":t=s+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}s=s+".slice("+i+", "+t+")"}else{let n=t.getAdjusted(e,"AT1");e=t.getAdjusted(e,"AT2");let r={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};s=t.provideFunction_("subsequence"+r[i]+r[o],`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(sequence${"FROM_END"===i||"FROM_START"===i?", at1":""}${"FROM_END"===o||"FROM_START"===o?", at2":""}) {
  var start = ${T("sequence",i,"at1")};
  var end = ${T("sequence",o,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+s+("FROM_END"===i||"FROM_START"===i?", "+n:"")+("FROM_END"===o||"FROM_START"===o?", "+e:"")+")"}return[s,u.FUNCTION_CALL]},p.lists_indexOf=function(e,t){let s="FIRST"===e.getFieldValue("END")?"indexOf":"lastIndexOf",i=t.valueToCode(e,"FIND",u.NONE)||"''";return t=(t.valueToCode(e,"VALUE",u.MEMBER)||"[]")+"."+s+"("+i+")",e.workspace.options.oneBasedIndex?[t+" + 1",u.ADDITION]:[t,u.FUNCTION_CALL]},p.lists_isEmpty=function(e,t){return["!"+(t.valueToCode(e,"VALUE",u.MEMBER)||"[]")+".length",u.LOGICAL_NOT]},p.lists_length=function(e,t){return[(t.valueToCode(e,"VALUE",u.MEMBER)||"[]")+".length",u.MEMBER]},p.lists_repeat=function(e,t){let s=t.provideFunction_("listsRepeat",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),i=t.valueToCode(e,"ITEM",u.NONE)||"null";return[s+"("+i+", "+(e=t.valueToCode(e,"NUM",u.NONE)||"0")+")",u.FUNCTION_CALL]},p.lists_reverse=function(e,t){return[(t.valueToCode(e,"LIST",u.FUNCTION_CALL)||"[]")+".slice().reverse()",u.FUNCTION_CALL]},p.lists_setIndex=function(e,s){function i(){if(o.match(/^\w+$/))return"";let e=s.nameDB_.getDistinctName("tmpList",t.NameType$$module$build$src$core$names.VARIABLE),i="var "+e+" = "+o+";\n";return o=e,i}let o=s.valueToCode(e,"LIST",u.MEMBER)||"[]",n=e.getFieldValue("MODE")||"GET";var r=e.getFieldValue("WHERE")||"FROM_START";let l=s.valueToCode(e,"TO",u.ASSIGNMENT)||"null";switch(r){case"FIRST":if("SET"===n)return o+"[0] = "+l+";\n";if("INSERT"===n)return o+".unshift("+l+");\n";break;case"LAST":if("SET"===n)return i()+(o+"["+o)+".length - 1] = "+l+";\n";if("INSERT"===n)return o+".push("+l+");\n";break;case"FROM_START":if(e=s.getAdjusted(e,"AT"),"SET"===n)return o+"["+e+"] = "+l+";\n";if("INSERT"===n)return o+".splice("+e+", 0, "+l+");\n";break;case"FROM_END":if(e=s.getAdjusted(e,"AT",1,!1,u.SUBTRACTION),r=i(),"SET"===n)return r+(o+"["+o+".length - "+e)+"] = "+l+";\n";if("INSERT"===n)return r+(o+".splice("+o+".length - "+e)+", 0, "+l+");\n";break;case"RANDOM":if(e=i()+("var "+(r=s.nameDB_.getDistinctName("tmpX",t.NameType$$module$build$src$core$names.VARIABLE))+" = Math.floor(Math.random() * "+o)+".length);\n","SET"===n)return e+(o+"["+r)+"] = "+l+";\n";if("INSERT"===n)return e+(o+".splice("+r)+", 0, "+l+");\n"}throw Error("Unhandled combination (lists_setIndex).")},p.lists_sort=function(e,t){let s=t.valueToCode(e,"LIST",u.FUNCTION_CALL)||"[]",i="1"===e.getFieldValue("DIRECTION")?1:-1;return e=e.getFieldValue("TYPE"),[s+".slice().sort("+(t=t.provideFunction_("listsGetSortCompare",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `))+'("'+e+'", '+i+"))",u.FUNCTION_CALL]},p.lists_split=function(e,t){let s=t.valueToCode(e,"INPUT",u.MEMBER);if(t=t.valueToCode(e,"DELIM",u.NONE)||"''","SPLIT"===(e=e.getFieldValue("MODE")))s||(s="''"),e="split";else if("JOIN"===e)s||(s="[]"),e="join";else throw Error("Unknown mode: "+e);return[s+"."+e+"("+t+")",u.FUNCTION_CALL]};var g={};g.controls_if=s,g.controls_ifelse=s,g.logic_boolean=function(e,t){return["TRUE"===e.getFieldValue("BOOL")?"true":"false",u.ATOMIC]},g.logic_compare=function(e,t){let s={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],i="=="===s||"!="===s?u.EQUALITY:u.RELATIONAL,o=t.valueToCode(e,"A",i)||"0";return[o+" "+s+" "+(e=t.valueToCode(e,"B",i)||"0"),i]},g.logic_negate=function(e,t){let s=u.LOGICAL_NOT;return["!"+(t.valueToCode(e,"BOOL",s)||"true"),s]},g.logic_null=function(e,t){return["null",u.ATOMIC]},g.logic_operation=function(e,t){let s="AND"===e.getFieldValue("OP")?"&&":"||",i="&&"===s?u.LOGICAL_AND:u.LOGICAL_OR,o=t.valueToCode(e,"A",i);return e=t.valueToCode(e,"B",i),o||e?(t="&&"===s?"true":"false",o||(o=t),e||(e=t)):e=o="false",[o+" "+s+" "+e,i]},g.logic_ternary=function(e,t){let s=t.valueToCode(e,"IF",u.CONDITIONAL)||"false",i=t.valueToCode(e,"THEN",u.CONDITIONAL)||"null";return[s+" ? "+i+" : "+(e=t.valueToCode(e,"ELSE",u.CONDITIONAL)||"null"),u.CONDITIONAL]};var h={};h.controls_flow_statements=function(e,t){let s="";if(t.STATEMENT_PREFIX&&(s+=t.injectId(t.STATEMENT_PREFIX,e)),t.STATEMENT_SUFFIX&&(s+=t.injectId(t.STATEMENT_SUFFIX,e)),t.STATEMENT_PREFIX){let i=e.getSurroundLoop();i&&!i.suppressPrefixSuffix&&(s+=t.injectId(t.STATEMENT_PREFIX,i))}switch(e.getFieldValue("FLOW")){case"BREAK":return s+"break;\n";case"CONTINUE":return s+"continue;\n"}throw Error("Unknown flow statement.")},h.controls_for=function(e,s){var i=s.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE),o=s.valueToCode(e,"FROM",u.ASSIGNMENT)||"0",n=s.valueToCode(e,"TO",u.ASSIGNMENT)||"0";let r=s.valueToCode(e,"BY",u.ASSIGNMENT)||"1",l=s.statementToCode(e,"DO");if(l=s.addLoopTrap(l,e),t.isNumber$$module$build$src$core$utils$string(o)&&t.isNumber$$module$build$src$core$utils$string(n)&&t.isNumber$$module$build$src$core$utils$string(r))s=Number(o)<=Number(n),e="for ("+i+" = "+o+"; "+i+(s?" <= ":" >= ")+n+"; "+i,e=(1===(i=Math.abs(Number(r)))?e+(s?"++":"--"):e+(s?" += ":" -= ")+i)+") {\n"+l+"}\n";else{e="";let a=o;o.match(/^\w+$/)||t.isNumber$$module$build$src$core$utils$string(o)||(a=s.nameDB_.getDistinctName(i+"_start",t.NameType$$module$build$src$core$names.VARIABLE),e+="var "+a+" = "+o+";\n"),o=n,n.match(/^\w+$/)||t.isNumber$$module$build$src$core$utils$string(n)||(o=s.nameDB_.getDistinctName(i+"_end",t.NameType$$module$build$src$core$names.VARIABLE),e+="var "+o+" = "+n+";\n"),n=s.nameDB_.getDistinctName(i+"_inc",t.NameType$$module$build$src$core$names.VARIABLE),e+="var "+n+" = ",e=(e=(t.isNumber$$module$build$src$core$utils$string(r)?e+(Math.abs(r)+";\n"):e+"Math.abs("+r+");\n")+("if ("+a+" > ")+o+") {\n"+(s.INDENT+n+" = -")+n+";\n")+"}\nfor ("+(i+" = "+a+"; "+n+" >= 0 ? "+i+" <= "+o+" : "+i+" >= "+o+"; "+i+" += "+n)+") {\n"+l+"}\n"}return e},h.controls_forEach=function(e,s){let i=s.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE);var o=s.valueToCode(e,"LIST",u.ASSIGNMENT)||"[]";let n=s.statementToCode(e,"DO");n=s.addLoopTrap(n,e),e="";let r=o;return o.match(/^\w+$/)||(e+="var "+(r=s.nameDB_.getDistinctName(i+"_list",t.NameType$$module$build$src$core$names.VARIABLE))+" = "+o+";\n"),o=s.nameDB_.getDistinctName(i+"_index",t.NameType$$module$build$src$core$names.VARIABLE),n=s.INDENT+i+" = "+r+"["+o+"];\n"+n,e+("for (var "+o+" in "+r)+") {\n"+n+"}\n"},h.controls_repeat=i,h.controls_repeat_ext=i,h.controls_whileUntil=function(e,t){let s="UNTIL"===e.getFieldValue("MODE"),i=t.valueToCode(e,"BOOL",s?u.LOGICAL_NOT:u.NONE)||"false",o=t.statementToCode(e,"DO");return o=t.addLoopTrap(o,e),s&&(i="!"+i),"while ("+i+") {\n"+o+"}\n"};var E={};E.math_arithmetic=function(e,t){var s={ADD:[" + ",u.ADDITION],MINUS:[" - ",u.SUBTRACTION],MULTIPLY:[" * ",u.MULTIPLICATION],DIVIDE:[" / ",u.DIVISION],POWER:[null,u.NONE]}[e.getFieldValue("OP")];let i=s[0];s=s[1];let o=t.valueToCode(e,"A",s)||"0";return e=t.valueToCode(e,"B",s)||"0",i?[o+i+e,s]:["Math.pow("+o+", "+e+")",u.FUNCTION_CALL]},E.math_atan2=function(e,t){let s=t.valueToCode(e,"X",u.NONE)||"0";return["Math.atan2("+(t.valueToCode(e,"Y",u.NONE)||"0")+", "+s+") / Math.PI * 180",u.DIVISION]},E.math_change=function(e,s){let i=s.valueToCode(e,"DELTA",u.ADDITION)||"0";return(e=s.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE))+" = (typeof "+e+" === 'number' ? "+e+" : 0) + "+i+";\n"},E.math_constant=function(e,t){return({PI:["Math.PI",u.MEMBER],E:["Math.E",u.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",u.DIVISION],SQRT2:["Math.SQRT2",u.MEMBER],SQRT1_2:["Math.SQRT1_2",u.MEMBER],INFINITY:["Infinity",u.ATOMIC]})[e.getFieldValue("CONSTANT")]},E.math_constrain=function(e,t){let s=t.valueToCode(e,"VALUE",u.NONE)||"0",i=t.valueToCode(e,"LOW",u.NONE)||"0";return["Math.min(Math.max("+s+", "+i+"), "+(e=t.valueToCode(e,"HIGH",u.NONE)||"Infinity")+")",u.FUNCTION_CALL]},E.math_modulo=function(e,t){let s=t.valueToCode(e,"DIVIDEND",u.MODULUS)||"0";return[s+" % "+(e=t.valueToCode(e,"DIVISOR",u.MODULUS)||"0"),u.MODULUS]},E.math_number=function(e,t){return[e=Number(e.getFieldValue("NUM")),0<=e?u.ATOMIC:u.UNARY_NEGATION]},E.math_number_property=function(e,t){var s={EVEN:[" % 2 === 0",u.MODULUS,u.EQUALITY],ODD:[" % 2 === 1",u.MODULUS,u.EQUALITY],WHOLE:[" % 1 === 0",u.MODULUS,u.EQUALITY],POSITIVE:[" > 0",u.RELATIONAL,u.RELATIONAL],NEGATIVE:[" < 0",u.RELATIONAL,u.RELATIONAL],DIVISIBLE_BY:[null,u.MODULUS,u.EQUALITY],PRIME:[null,u.NONE,u.FUNCTION_CALL]};let i=e.getFieldValue("PROPERTY"),[o,n,r]=s[i];return s=t.valueToCode(e,"NUMBER_TO_CHECK",n)||"0",[e="PRIME"===i?t.provideFunction_("mathIsPrime",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+s+")":"DIVISIBLE_BY"===i?s+" % "+(e=t.valueToCode(e,"DIVISOR",u.MODULUS)||"0")+" === 0":s+o,r]},E.math_on_list=function(e,t){var s=e.getFieldValue("OP");switch(s){case"SUM":e=(t.valueToCode(e,"LIST",u.MEMBER)||"[]")+".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":e="Math.min.apply(null, "+(e=t.valueToCode(e,"LIST",u.NONE)||"[]")+")";break;case"MAX":e="Math.max.apply(null, "+(e=t.valueToCode(e,"LIST",u.NONE)||"[]")+")";break;case"AVERAGE":e=(s=t.provideFunction_("mathMean",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`))+"("+(e=t.valueToCode(e,"LIST",u.NONE)||"[]")+")";break;case"MEDIAN":e=(s=t.provideFunction_("mathMedian",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`))+"("+(e=t.valueToCode(e,"LIST",u.NONE)||"[]")+")";break;case"MODE":e=(s=t.provideFunction_("mathModes",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`))+"("+(e=t.valueToCode(e,"LIST",u.NONE)||"[]")+")";break;case"STD_DEV":e=(s=t.provideFunction_("mathStandardDeviation",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`))+"("+(e=t.valueToCode(e,"LIST",u.NONE)||"[]")+")";break;case"RANDOM":e=(s=t.provideFunction_("mathRandomList",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`))+"("+(e=t.valueToCode(e,"LIST",u.NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+s)}return[e,u.FUNCTION_CALL]},E.math_random_float=function(e,t){return["Math.random()",u.FUNCTION_CALL]},E.math_random_int=function(e,t){let s=t.valueToCode(e,"FROM",u.NONE)||"0";return e=t.valueToCode(e,"TO",u.NONE)||"0",[t.provideFunction_("mathRandomInt",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+s+", "+e+")",u.FUNCTION_CALL]},E.math_round=o,E.math_single=o,E.math_trig=o;var m={};m.procedures_callnoreturn=function(e,t){return t.forBlock.procedures_callreturn(e,t)[0]+";\n"},m.procedures_callreturn=function(e,s){let i=s.nameDB_.getName(e.getFieldValue("NAME"),t.NameType$$module$build$src$core$names.PROCEDURE),o=[],n=e.getVars();for(let t=0;t<n.length;t++)o[t]=s.valueToCode(e,"ARG"+t,u.NONE)||"null";return[i+"("+o.join(", ")+")",u.FUNCTION_CALL]},m.procedures_defnoreturn=n,m.procedures_defreturn=n,m.procedures_ifreturn=function(e,t){let s="if ("+(t.valueToCode(e,"CONDITION",u.NONE)||"false")+") {\n";return t.STATEMENT_SUFFIX&&(s+=t.prefixLines(t.injectId(t.STATEMENT_SUFFIX,e),t.INDENT)),e.hasReturnValue_?(e=t.valueToCode(e,"VALUE",u.NONE)||"null",s+=t.INDENT+"return "+e+";\n"):s+=t.INDENT+"return;\n",s+"}\n"};var S=/^\s*'([^']|\\')*'\s*$/,I=function(e){return S.test(e)?[e,u.ATOMIC]:["String("+e+")",u.FUNCTION_CALL]},$=function(e,t,s){return"FIRST"===t?"0":"FROM_END"===t?e+".length - 1 - "+s:"LAST"===t?e+".length - 1":s},O={};O.text=function(e,t){return[t.quote_(e.getFieldValue("TEXT")),u.ATOMIC]},O.text_append=function(e,s){let i=s.nameDB_.getName(e.getFieldValue("VAR"),t.NameType$$module$build$src$core$names.VARIABLE);return i+" += "+I(e=s.valueToCode(e,"TEXT",u.NONE)||"''")[0]+";\n"},O.text_changeCase=function(e,t){let s={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[e.getFieldValue("CASE")];return e=t.valueToCode(e,"TEXT",s?u.MEMBER:u.NONE)||"''",[s?e+s:t.provideFunction_("textToTitleCase",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+e+")",u.FUNCTION_CALL]},O.text_charAt=function(e,t){let s=e.getFieldValue("WHERE")||"FROM_START",i=t.valueToCode(e,"VALUE","RANDOM"===s?u.NONE:u.MEMBER)||"''";switch(s){case"FIRST":return[i+".charAt(0)",u.FUNCTION_CALL];case"LAST":return[i+".slice(-1)",u.FUNCTION_CALL];case"FROM_START":return[i+".charAt("+(e=t.getAdjusted(e,"AT"))+")",u.FUNCTION_CALL];case"FROM_END":return[i+".slice("+(e=t.getAdjusted(e,"AT",1,!0))+").charAt(0)",u.FUNCTION_CALL];case"RANDOM":return[t.provideFunction_("textRandomLetter",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+i+")",u.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},O.text_count=function(e,t){let s=t.valueToCode(e,"TEXT",u.NONE)||"''";return e=t.valueToCode(e,"SUB",u.NONE)||"''",[t.provideFunction_("textCount",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+s+", "+e+")",u.FUNCTION_CALL]},O.text_getSubstring=function(e,t){var s=e.getFieldValue("WHERE1");let i=e.getFieldValue("WHERE2");var o="FROM_END"!==s&&"LAST"!==s&&"FROM_END"!==i&&"LAST"!==i,n=t.valueToCode(e,"STRING",o?u.MEMBER:u.NONE)||"''";if("FIRST"===s&&"LAST"===i)return[n,u.NONE];if(n.match(/^'?\w+'?$/)||o){switch(s){case"FROM_START":s=t.getAdjusted(e,"AT1");break;case"FROM_END":s=n+".length - "+(s=t.getAdjusted(e,"AT1",1,!1,u.SUBTRACTION));break;case"FIRST":s="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(i){case"FROM_START":t=t.getAdjusted(e,"AT2",1);break;case"FROM_END":t=n+".length - "+(t=t.getAdjusted(e,"AT2",0,!1,u.SUBTRACTION));break;case"LAST":t=n+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}n=n+".slice("+s+", "+t+")"}else{o=t.getAdjusted(e,"AT1"),e=t.getAdjusted(e,"AT2");let r={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};n=t.provideFunction_("subsequence"+r[s]+r[i],`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(sequence${"FROM_END"===s||"FROM_START"===s?", at1":""}${"FROM_END"===i||"FROM_START"===i?", at2":""}) {
  var start = ${$("sequence",s,"at1")};
  var end = ${$("sequence",i,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+n+("FROM_END"===s||"FROM_START"===s?", "+o:"")+("FROM_END"===i||"FROM_START"===i?", "+e:"")+")"}return[n,u.FUNCTION_CALL]},O.text_indexOf=function(e,t){let s="FIRST"===e.getFieldValue("END")?"indexOf":"lastIndexOf",i=t.valueToCode(e,"FIND",u.NONE)||"''";return t=(t.valueToCode(e,"VALUE",u.MEMBER)||"''")+"."+s+"("+i+")",e.workspace.options.oneBasedIndex?[t+" + 1",u.ADDITION]:[t,u.FUNCTION_CALL]},O.text_isEmpty=function(e,t){return["!"+(t.valueToCode(e,"VALUE",u.MEMBER)||"''")+".length",u.LOGICAL_NOT]},O.text_join=function(e,t){switch(e.itemCount_){case 0:return["''",u.ATOMIC];case 1:return I(e=t.valueToCode(e,"ADD0",u.NONE)||"''");case 2:var s=t.valueToCode(e,"ADD0",u.NONE)||"''";return e=t.valueToCode(e,"ADD1",u.NONE)||"''",[I(s)[0]+" + "+I(e)[0],u.ADDITION];default:s=Array(e.itemCount_);for(let i=0;i<e.itemCount_;i++)s[i]=t.valueToCode(e,"ADD"+i,u.NONE)||"''";return["["+s.join(",")+"].join('')",u.FUNCTION_CALL]}},O.text_length=function(e,t){return[(t.valueToCode(e,"VALUE",u.MEMBER)||"''")+".length",u.MEMBER]},O.text_multiline=function(e,t){return t=-1!==(e=t.multiline_quote_(e.getFieldValue("TEXT"))).indexOf("+")?u.ADDITION:u.ATOMIC,[e,t]},O.text_print=function(e,t){return"window.alert("+(t.valueToCode(e,"TEXT",u.NONE)||"''")+");\n"},O.text_prompt=r,O.text_prompt_ext=r,O.text_replace=function(e,t){let s=t.valueToCode(e,"TEXT",u.NONE)||"''",i=t.valueToCode(e,"FROM",u.NONE)||"''";return e=t.valueToCode(e,"TO",u.NONE)||"''",[t.provideFunction_("textReplace",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+s+", "+i+", "+e+")",u.FUNCTION_CALL]},O.text_reverse=function(e,t){return[(t.valueToCode(e,"TEXT",u.MEMBER)||"''")+".split('').reverse().join('')",u.FUNCTION_CALL]},O.text_trim=function(e,t){let s={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[e.getFieldValue("MODE")];return[(t.valueToCode(e,"TEXT",u.MEMBER)||"''")+s,u.FUNCTION_CALL]};var L={};L.variables_get=l,L.variables_set=a;var R={};R.variables_get_dynamic=l,R.variables_set_dynamic=a;var f=new c;Object.assign(f.forBlock,d,p,g,h,E,m,O,L,R);var b={};return b.JavascriptGenerator=c,b.Order=u,b.javascriptGenerator=f,b.__namespace__=t,b}).apply(t,[s(7307)]))&&(e.exports=i)},9177:function(e,t){var s,i;void 0!==(s="function"==typeof(i=function(){"use strict";var e=e||{Msg:Object.create(null)};return e.Msg.ADD_COMMENT="Add Comment",e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",e.Msg.CHANGE_VALUE_TITLE="Change value:",e.Msg.CLEAN_UP="Clean up Blocks",e.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",e.Msg.COLLAPSE_ALL="Collapse Blocks",e.Msg.COLLAPSE_BLOCK="Collapse Block",e.Msg.COLOUR_BLEND_COLOUR1="colour 1",e.Msg.COLOUR_BLEND_COLOUR2="colour 2",e.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",e.Msg.COLOUR_BLEND_RATIO="ratio",e.Msg.COLOUR_BLEND_TITLE="blend",e.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",e.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",e.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",e.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",e.Msg.COLOUR_RANDOM_TITLE="random colour",e.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",e.Msg.COLOUR_RGB_BLUE="blue",e.Msg.COLOUR_RGB_GREEN="green",e.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",e.Msg.COLOUR_RGB_RED="red",e.Msg.COLOUR_RGB_TITLE="colour with",e.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",e.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",e.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",e.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",e.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",e.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",e.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",e.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",e.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",e.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",e.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",e.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",e.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",e.Msg.CONTROLS_IF_MSG_ELSE="else",e.Msg.CONTROLS_IF_MSG_ELSEIF="else if",e.Msg.CONTROLS_IF_MSG_IF="if",e.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",e.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",e.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",e.Msg.CONTROLS_REPEAT_INPUT_DO="do",e.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",e.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",e.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",e.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",e.Msg.DELETE_BLOCK="Delete Block",e.Msg.DELETE_VARIABLE="Delete the '%1' variable",e.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",e.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",e.Msg.DIALOG_CANCEL="Cancel",e.Msg.DIALOG_OK="OK",e.Msg.DISABLE_BLOCK="Disable Block",e.Msg.DUPLICATE_BLOCK="Duplicate",e.Msg.DUPLICATE_COMMENT="Duplicate Comment",e.Msg.ENABLE_BLOCK="Enable Block",e.Msg.EXPAND_ALL="Expand Blocks",e.Msg.EXPAND_BLOCK="Expand Block",e.Msg.EXTERNAL_INPUTS="External Inputs",e.Msg.HELP="Help",e.Msg.INLINE_INPUTS="Inline Inputs",e.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",e.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",e.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",e.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",e.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",e.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",e.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",e.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",e.Msg.LISTS_GET_INDEX_FIRST="first",e.Msg.LISTS_GET_INDEX_FROM_END="# from end",e.Msg.LISTS_GET_INDEX_FROM_START="#",e.Msg.LISTS_GET_INDEX_GET="get",e.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",e.Msg.LISTS_GET_INDEX_LAST="last",e.Msg.LISTS_GET_INDEX_RANDOM="random",e.Msg.LISTS_GET_INDEX_REMOVE="remove",e.Msg.LISTS_GET_INDEX_TAIL="",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",e.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",e.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",e.Msg.LISTS_GET_SUBLIST_END_LAST="to last",e.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",e.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",e.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",e.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",e.Msg.LISTS_GET_SUBLIST_TAIL="",e.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",e.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",e.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",e.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",e.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",e.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",e.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",e.Msg.LISTS_INLIST="in list",e.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",e.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",e.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",e.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",e.Msg.LISTS_LENGTH_TITLE="length of %1",e.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",e.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",e.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",e.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",e.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",e.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",e.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",e.Msg.LISTS_SET_INDEX_INPUT_TO="as",e.Msg.LISTS_SET_INDEX_INSERT="insert at",e.Msg.LISTS_SET_INDEX_SET="set",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",e.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",e.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",e.Msg.LISTS_SORT_ORDER_DESCENDING="descending",e.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",e.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",e.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",e.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",e.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",e.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",e.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",e.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",e.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",e.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",e.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",e.Msg.LOGIC_BOOLEAN_FALSE="false",e.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",e.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",e.Msg.LOGIC_BOOLEAN_TRUE="true",e.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",e.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",e.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",e.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",e.Msg.LOGIC_NEGATE_TITLE="not %1",e.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",e.Msg.LOGIC_NULL="null",e.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",e.Msg.LOGIC_NULL_TOOLTIP="Returns null.",e.Msg.LOGIC_OPERATION_AND="and",e.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",e.Msg.LOGIC_OPERATION_OR="or",e.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",e.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",e.Msg.LOGIC_TERNARY_CONDITION="test",e.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",e.Msg.LOGIC_TERNARY_IF_FALSE="if false",e.Msg.LOGIC_TERNARY_IF_TRUE="if true",e.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",e.Msg.MATH_ADDITION_SYMBOL="+",e.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",e.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",e.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",e.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",e.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",e.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",e.Msg.MATH_CHANGE_TITLE="change %1 by %2",e.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",e.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",e.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt(\xbd) (0.707), or  (infinity).",e.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",e.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",e.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",e.Msg.MATH_DIVISION_SYMBOL="\xf7",e.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",e.Msg.MATH_IS_EVEN="is even",e.Msg.MATH_IS_NEGATIVE="is negative",e.Msg.MATH_IS_ODD="is odd",e.Msg.MATH_IS_POSITIVE="is positive",e.Msg.MATH_IS_PRIME="is prime",e.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",e.Msg.MATH_IS_WHOLE="is whole",e.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",e.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",e.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",e.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",e.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",e.Msg.MATH_NUMBER_TOOLTIP="A number.",e.Msg.MATH_ONLIST_HELPURL="",e.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",e.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",e.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",e.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",e.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",e.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",e.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",e.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",e.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",e.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",e.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",e.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",e.Msg.MATH_POWER_SYMBOL="^",e.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",e.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",e.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",e.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",e.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",e.Msg.MATH_ROUND_OPERATOR_ROUND="round",e.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",e.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",e.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",e.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",e.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",e.Msg.MATH_SINGLE_OP_ROOT="square root",e.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",e.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",e.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",e.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",e.Msg.MATH_SUBTRACTION_SYMBOL="-",e.Msg.MATH_TRIG_ACOS="acos",e.Msg.MATH_TRIG_ASIN="asin",e.Msg.MATH_TRIG_ATAN="atan",e.Msg.MATH_TRIG_COS="cos",e.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",e.Msg.MATH_TRIG_SIN="sin",e.Msg.MATH_TRIG_TAN="tan",e.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",e.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",e.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",e.Msg.NEW_NUMBER_VARIABLE="Create number variable...",e.Msg.NEW_STRING_VARIABLE="Create string variable...",e.Msg.NEW_VARIABLE="Create variable...",e.Msg.NEW_VARIABLE_TITLE="New variable name:",e.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",e.Msg.ORDINAL_NUMBER_SUFFIX="",e.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",e.Msg.PROCEDURES_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",e.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",e.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_CREATE_DO="Create '%1'",e.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",e.Msg.PROCEDURES_DEFNORETURN_DO="",e.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",e.Msg.PROCEDURES_DEFNORETURN_TITLE="to",e.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",e.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFRETURN_RETURN="return",e.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",e.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",e.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",e.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",e.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",e.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",e.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",e.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",e.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",e.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",e.Msg.REDO="Redo",e.Msg.REMOVE_COMMENT="Remove Comment",e.Msg.RENAME_VARIABLE="Rename variable...",e.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",e.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_APPEND_TITLE="to %1 append text %2",e.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",e.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",e.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",e.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",e.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",e.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",e.Msg.TEXT_CHARAT_FIRST="get first letter",e.Msg.TEXT_CHARAT_FROM_END="get letter # from end",e.Msg.TEXT_CHARAT_FROM_START="get letter #",e.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",e.Msg.TEXT_CHARAT_LAST="get last letter",e.Msg.TEXT_CHARAT_RANDOM="get random letter",e.Msg.TEXT_CHARAT_TAIL="",e.Msg.TEXT_CHARAT_TITLE="in text %1 %2",e.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",e.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",e.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",e.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",e.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",e.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",e.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",e.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",e.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",e.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",e.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",e.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",e.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",e.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",e.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",e.Msg.TEXT_GET_SUBSTRING_TAIL="",e.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",e.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",e.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",e.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",e.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",e.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",e.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",e.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",e.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",e.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",e.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",e.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",e.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_LENGTH_TITLE="length of %1",e.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",e.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",e.Msg.TEXT_PRINT_TITLE="print %1",e.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",e.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",e.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",e.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",e.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",e.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",e.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",e.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",e.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",e.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",e.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",e.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",e.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",e.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",e.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",e.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",e.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",e.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",e.Msg.TODAY="Today",e.Msg.UNDO="Undo",e.Msg.UNNAMED_KEY="unnamed",e.Msg.VARIABLES_DEFAULT_NAME="item",e.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",e.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",e.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",e.Msg.VARIABLES_SET="set %1 to %2",e.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",e.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",e.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",e.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",e.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",e.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",e.Msg.CONTROLS_FOREACH_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_FOR_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=e.Msg.CONTROLS_IF_MSG_ELSEIF,e.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=e.Msg.CONTROLS_IF_MSG_ELSE,e.Msg.CONTROLS_IF_IF_TITLE_IF=e.Msg.CONTROLS_IF_MSG_IF,e.Msg.CONTROLS_IF_MSG_THEN=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.LISTS_CREATE_WITH_ITEM_TITLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.LISTS_GET_INDEX_HELPURL=e.Msg.LISTS_INDEX_OF_HELPURL,e.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.MATH_CHANGE_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.PROCEDURES_DEFRETURN_COMMENT=e.Msg.PROCEDURES_DEFNORETURN_COMMENT,e.Msg.PROCEDURES_DEFRETURN_DO=e.Msg.PROCEDURES_DEFNORETURN_DO,e.Msg.PROCEDURES_DEFRETURN_PROCEDURE=e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,e.Msg.PROCEDURES_DEFRETURN_TITLE=e.Msg.PROCEDURES_DEFNORETURN_TITLE,e.Msg.TEXT_APPEND_VARIABLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.LOGIC_HUE="210",e.Msg.LOOPS_HUE="120",e.Msg.MATH_HUE="230",e.Msg.TEXTS_HUE="160",e.Msg.LISTS_HUE="260",e.Msg.COLOUR_HUE="20",e.Msg.VARIABLES_HUE="330",e.Msg.VARIABLES_DYNAMIC_HUE="310",e.Msg.PROCEDURES_HUE="290",e.Msg})?i.apply(t,[]):i)&&(e.exports=s)},9501:function(e){e.exports=function(){"use strict";function e(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,i)}return s}function t(t){for(var s=1;s<arguments.length;s++){var i=null!=arguments[s]?arguments[s]:{};s%2?e(Object(i),!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function s(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function i(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,S(i.key),i)}}function o(e,t,s){return t&&i(e.prototype,t),s&&i(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(e,t,s){return(t=S(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function r(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function c(e,t,s){return(c=u()?Reflect.construct.bind():function(e,t,s){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return s&&a(o,s.prototype),o}).apply(null,arguments)}function _(e){var t="function"==typeof Map?new Map:void 0;return(_=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,s)}function s(){return c(e,arguments,l(this).constructor)}return s.prototype=Object.create(e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),a(s,e)})(e)}function d(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){var t=u();return function(){var s,i=l(e);if(t){var o=l(this).constructor;s=Reflect.construct(i,arguments,o)}else s=i.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return d(e)}(this,s)}}function p(){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,s){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:s):o.value}}).apply(this,arguments)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var i,o,n,r,l=[],a=!0,u=!1;try{if(n=(s=s.call(e)).next,0===t){if(Object(s)!==s)return;a=!1}else for(;!(a=(i=n.call(s)).done)&&(l.push(i.value),l.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{if(!a&&null!=s.return&&(r=s.return(),Object(r)!==r))return}finally{if(u)throw o}}return l}}(e,t)||E(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return m(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);if("Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s)return Array.from(e);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return m(e,t)}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=Array(t);s<t;s++)i[s]=e[s];return i}function S(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var i=s.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var I=function(e,t,s){var i=e.x,o=e.y,n=s.x,r=s.y;return({"+":{x:i+n,y:o+r},"-":{x:i-n,y:o-r},"*":{x:i*n,y:o*r},"/":{x:i/n,y:o/r}})[t]},$=function(e){return{x:e.left,y:e.top}},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{left:e.x,top:e.y,right:e.x,bottom:e.y,width:t,height:t}},L=function(e,t){window.addEventListener("resize",t),window.addEventListener("scroll",t);var s=new MutationObserver(t);return e.forEach(function(e,t){s.observe(e,{childList:0!==t,attributes:!0})}),{observer:s,callback:t,cleanup:function(){return j(s,t)}}},R=function(e){var t=D(e);return!!t.x||!!t.y||(e instanceof Document?e.body?(e.body.scrollTop=1,!0):(e.documentElement.scrollTop=1,!0):(e.scrollTop=1,!0))},f=function(){var e=document.createElement("div");return e.style.position="fixed",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.zIndex="999999999999999999",e},b=function(e){var t=document.createElement("div");return t.style.position="absolute",e||(t.style.background="rgba(0, 175, 255, 0.2)",t.style.border="1px solid rgba(0, 175, 255, 0.8)",t.style.display="none",t.style.pointerEvents="none"),t},A=function(e,t){var s;return function(){for(var i=arguments.length,o=Array(i),n=0;n<i;n++)o[n]=arguments[n];clearTimeout(s),s=setTimeout(function(){s=null,e.apply(void 0,o)},t)}},M=function(){var e,t,s,i;return{y:(null===(e=document.body)||void 0===e?void 0:e.scrollTop)||(null===(t=document.documentElement)||void 0===t?void 0:t.scrollTop)||0,x:(null===(s=document.body)||void 0===s?void 0:s.scrollLeft)||(null===(i=document.documentElement)||void 0===i?void 0:i.scrollLeft)||0}},N=function(e){return function e(t){var s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=null===(s=t[i])||void 0===s?void 0:s.parentNode;return o?(t.push(o),e(t,++i)):t}([e])},C=function(e,t){if(e instanceof Document)return{top:0,left:0,bottom:0,right:0,width:window.innerWidth,height:window.innerHeight};var s=e.getBoundingClientRect();return{top:s.top,left:s.left,bottom:s.bottom,right:s.right,width:(e.clientWidth||s.width)*t,height:(e.clientHeight||s.height)*t}},y=function(e,t){var s={top:Number.POSITIVE_INFINITY,left:Number.POSITIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,right:Number.NEGATIVE_INFINITY,width:Number.NEGATIVE_INFINITY,height:Number.NEGATIVE_INFINITY};return Z(e).forEach(function(e){var i=t.getRect(e);s.top=Math.min(s.top,i.top),s.left=Math.min(s.left,i.left),s.bottom=Math.max(s.bottom,i.bottom),s.right=Math.max(s.right,i.right)}),s.height=s.bottom-s.top,s.width=s.right-s.left,s},D=function(e){return!e||e instanceof Document?M():{x:e.scrollLeft>=0?e.scrollLeft:M().x,y:e.scrollTop>=0?e.scrollTop:M().y}},v=function(e){var t=e.elementRect,s=e.containerRect,i=e.tolerance,o=void 0===i?{x:0,y:0}:i,n=[];return t.top-o.y<s.top&&n.push("top"),t.left-o.x<s.left&&n.push("left"),t.bottom+o.y>s.bottom&&n.push("bottom"),t.right+o.y>s.right&&n.push("right"),n},P=function(e){var t=e.event;return{x:t.clientX,y:t.clientY}},k=function(e){var t=e.scrollAmount,s=e.initialPointerPos,i=e.pointerPos,o={};return i.x>s.x-t.x?(o.left=s.x-t.x,o.width=i.x-s.x+t.x):(o.left=i.x,o.width=s.x-i.x-t.x),i.y>s.y-t.y?(o.top=s.y-t.y,o.height=i.y-s.y+t.y):(o.top=i.y,o.height=s.y-i.y-t.y),o},B=function(e){var t={x:0,y:0},s=window.getComputedStyle(e);if(!s.transform||"none"===s.transform)return t;if(s.transform.indexOf("3d")>=0){var i=s.transform.trim().match(/matrix3d\((.*?)\)/);if(i&&i.length){var o,n=null===(o=i[1])||void 0===o?void 0:o.split(",");t.x=parseInt(n[12])||0,t.y=parseInt(n[13])||0}return t}var r=s.transform.trim().match(/matrix\((.*?)\)/);if(r&&r.length){var l,a=null===(l=r[1])||void 0===l?void 0:l.split(",");t.x=parseInt(a[4])||0,t.y=parseInt(a[5])||0}return t},U=function(e){var t=e.style.transform;if(!t||0>t.indexOf("translate"))return B(e);var s={x:0,y:0},i=t.trim().match(/translate[3dD]*?\(.*?\)/);if(i){var o=null===(n=i[0])||void 0===n?void 0:n.split("(");if(o){var n,r,l=null===(r=o[1])||void 0===r?void 0:r.split(",");s.x=parseInt(l[0])||0,s.y=parseInt(l[1])||0}}return s.x||s.x?s:B(e)},F=function(e){var t=e.style,s={x:parseInt(t.left)||0,y:parseInt(t.top)||0};if(!s.x&&!s.x){var i=window.getComputedStyle(e);return{x:parseInt(i.left)||0,y:parseInt(i.top)||0}}return s},x=function(e){var t=e.element,s=e.edges,i=e.elementRect,o=e.containerRect,n=e.elementPos,r=e.useTransform;s.includes("top")&&J(t,{y:n.y+o.top-i.top,x:n.x},r),s.includes("left")&&J(t,{y:n.y,x:n.x+o.left-i.left},r),s.includes("bottom")&&J(t,{y:n.y+o.bottom-i.bottom,x:n.x},r),s.includes("right")&&J(t,{y:n.y,x:n.x+o.right-i.right},r)},w=function(e){var t=e.computedStyle,s=e.node,i=t.position;s instanceof Document||"absolute"===i||"relative"===i||"fixed"===i||(s.style.position="relative")},H=function(e){var t=e.shiftKey,s=e.keyboardDragSpeed,i=e.zoom,o=e.key,n=e.dragKeys,r=e.scrollDiff,l=e.canScroll,a=e.scrollCallback,u={x:0,y:0},c=t?4*s*i:s*i;return n.left.includes(o)&&(u.x=r.x||-c,t||r.x||!l||a(["left"],s)),n.right.includes(o)&&(u.x=r.x||c,t||r.x||!l||a(["right"],s)),n.up.includes(o)&&(u.y=r.y||-c,t||r.y||!l||a(["top"],s)),n.down.includes(o)&&(u.y=r.y||c,t||r.y||!l||a(["bottom"],s)),u},G=function(e){var t=e.element,s=e.force,i=e.multiSelectionToggle,o=e.SelectedSet,n=e.hoverClassName;(!t.classList.contains(n)||s)&&(o.has(t)?i&&o.delete(t):o.add(t),t.classList.add(n))},V=function(e){var t=e.element,s=e.force,i=e.SelectedSet,o=e.PrevSelectedSet,n=e.hoverClassName;if(!t.classList.contains(n)&&!s)return!1;var r=i.has(t),l=o.has(t);r&&!l?i.delete(t):!r&&l&&i.add(t),t.classList.remove(n)},K=function(e,t,s){return console.warn('[DragSelect] TypeIssue: setting "'.concat(e,'" is not of type "').concat(t,'".'))},X=function(e,t,s,i){if(void 0===t)return s?n({},e,i):{};if(null===t)return n({},e,null);var o=!0,r=!1,l="string"==typeof i;l&&(o="string"==typeof t||t instanceof String),l&&!o&&(r=!0,K(e,"string"));var a=!Number.isNaN(i)&&"number"==typeof i;a&&(o=!Number.isNaN(t)&&"number"==typeof t),a&&!o&&(r=!0,K(e,"number"));var u="[object Object]"===Object.prototype.toString.call(i);u&&(o="[object Object]"===Object.prototype.toString.call(t)),u&&!o&&(r=!0,K(e,"object"));var c="boolean"==typeof i;c&&(o="boolean"==typeof t),c&&!o&&(r=!0,K(e,"boolean"));var _=Array.isArray(i);_&&(o=Array.isArray(t)),_&&!o&&(r=!0,K(e,"array"));var d=r||s;return"dragKeys"===e&&o?n({},e,Object.assign(i,t)):("dragKeys"!==e||o)&&("dropZones"===e&&o&&new Set(t.map(function(e){return e.id})).size!==t.length&&console.warn('[DragSelect] UniqueConstraintsIssue: setting "dropZones" contains duplicate ids.'),o)?n({},e,t):d?n({},e,i):{}},Y=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e;if(s>0){var o=(e.right-e.left)*s,n=(e.bottom-e.top)*s;i={left:e.left+o,right:e.right-o,top:e.top+n,bottom:e.bottom-n}}return i.left<t.right&&i.right>t.left&&i.top<t.bottom&&i.bottom>t.top},W=function(e){var t=e.element,s=e.posDirection,i=e.containerRect,o=e.useTransform,n=I(o?U(t):F(t),"+",s);J(t,n,o);var r=t.getBoundingClientRect();x({element:t,edges:v({elementRect:r,containerRect:i}),elementRect:r,containerRect:i,elementPos:n,useTransform:o})},j=function(e,t){window.removeEventListener("resize",t),window.removeEventListener("scroll",t),e.disconnect()},z=function(e,t,s){if(t.length){var i=document&&document.documentElement&&document.documentElement.scrollTop&&document.documentElement,o=e instanceof Document?i||document.body:e,n=t.includes("top")&&o.scrollTop>0,r=t.includes("bottom")&&o.scrollTop<o.scrollHeight,l=t.includes("left")&&o.scrollLeft>0,a=t.includes("right")&&o.scrollLeft<o.scrollWidth;n&&(o.scrollTop-=1*s),r&&(o.scrollTop+=1*s),l&&(o.scrollLeft-=1*s),a&&(o.scrollLeft+=1*s)}},J=function(e,t,s){if(s){var i=e.style.transform;e.style.transform="translate3d(".concat(t.x,"px,").concat(t.y,"px,1px) ").concat(i.replace(/translate.*?\)/g,""))}else e.style.left="".concat(t.x,"px"),e.style.top="".concat(t.y,"px");return e},q=function(e){for(var s=e.subscribe,i=e.publish,o=e.Interaction,n=e.SelectedSet,r=e.DropZones,l=0,a=Object.entries({"Selected:added":[{name:"elementselect"}],"Selected:removed":[{name:"elementunselect"}],"Area:scroll":[{name:"autoscroll"}],"Interaction:start":[{name:"dragstart"}],"Interaction:update":[{name:"dragmove",condition:function(e){return e.event}}],"Interaction:end":[{name:"callback",extraData:function(){var e=r.getTarget();return t({},e?{dropTarget:e.toObject()}:{})}}]});l<a.length;l++)!function(){var e=g(a[l],2),r=e[0],u=e[1];["pre",!1].forEach(function(e){return s(e?"".concat(r,":").concat(e):r,function(s){return u.forEach(function(r){return(!r.condition||r.condition(s))&&i(e?"".concat(e).concat(r.name):r.name,t(t({items:n.elements,isDragging:o.isDragging},s),r.extraData?r.extraData(s):{}))})})})}()},Z=function(e){return e?!Array.isArray(e)&&(e instanceof HTMLElement||e instanceof SVGElement)?[e]:h(new Set(h(e))):[]},Q=function(e,t){e.style.left="".concat(t.left,"px"),e.style.top="".concat(t.top,"px"),e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px")},ee=function(){function e(t){var i=this,o=t.DS;s(this,e),n(this,"DS",void 0),n(this,"_observers",void 0),n(this,"_node",void 0),n(this,"_parentNodes",void 0),n(this,"_computedStyle",void 0),n(this,"_computedBorder",void 0),n(this,"_rect",void 0),n(this,"setArea",function(e){i.reset(),i._node=e,w({computedStyle:i.computedStyle,node:i._node}),setTimeout(function(){i.DS.PubSub.publish("Area:modified:pre",{item:i}),i.reset(),i.DS.PubSub.publish("Area:modified",{item:i})})}),n(this,"start",function(){i._observers=L(i.parentNodes,A(function(e){i.DS.PubSub.publish("Area:modified:pre",{event:e,item:i}),i.reset(),i.DS.PubSub.publish("Area:modified",{event:e,item:i})},60))}),n(this,"reset",function(){i._computedStyle=void 0,i._rect=void 0,i._computedBorder=void 0,i._parentNodes=void 0}),n(this,"stop",function(){i._observers.cleanup(),i.reset()}),n(this,"scroll",function(e,t){var s={scroll_directions:e,scroll_multiplier:t};i.DS.PubSub.publish("Area:scroll:pre",s),z(i._node,e,t),i.DS.PubSub.publish("Area:scroll",s)}),this.DS=o,this.setArea(this.DS.stores.SettingsStore.s.area),this.DS.PubSub.subscribe("Settings:updated:area",function(e){var t=e.settings;i.setArea(t.area)}),this.DS.PubSub.subscribe("Interaction:init",this.start),this.DS.PubSub.subscribe("Interaction:end",this.reset)}return o(e,[{key:"HTMLNode",get:function(){return this._node}},{key:"computedBorder",get:function(){return this._computedBorder?this._computedBorder:{top:parseInt(this.computedStyle.borderTopWidth),bottom:parseInt(this.computedStyle.borderBottomWidth),left:parseInt(this.computedStyle.borderLeftWidth),right:parseInt(this.computedStyle.borderRightWidth)}}},{key:"computedStyle",get:function(){return this._computedStyle?this._computedStyle:this.HTMLNode instanceof Document?this._computedStyle=window.getComputedStyle(this.HTMLNode.body||this.HTMLNode.documentElement):this._computedStyle=window.getComputedStyle(this.HTMLNode)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=C(this.HTMLNode,this.DS.stores.SettingsStore.s.zoom)}},{key:"parentNodes",get:function(){return this._parentNodes?this._parentNodes:this._parentNodes=N(this.HTMLNode)}}]),e}(),et=function(){function e(t){var i=this,o=t.DS;s(this,e),n(this,"_prevCursorPos",void 0),n(this,"_prevScrollPos",void 0),n(this,"_elements",[]),n(this,"_dragKeys",void 0),n(this,"_dragKeysFlat",[]),n(this,"_selectionRect",void 0),n(this,"assignDragkeys",function(){i._dragKeys={up:i.DS.stores.SettingsStore.s.dragKeys.up.map(function(e){return e.toLowerCase()}),down:i.DS.stores.SettingsStore.s.dragKeys.down.map(function(e){return e.toLowerCase()}),left:i.DS.stores.SettingsStore.s.dragKeys.left.map(function(e){return e.toLowerCase()}),right:i.DS.stores.SettingsStore.s.dragKeys.right.map(function(e){return e.toLowerCase()})},i._dragKeysFlat=[].concat(h(i._dragKeys.up),h(i._dragKeys.down),h(i._dragKeys.left),h(i._dragKeys.right))}),n(this,"keyboardDrag",function(e){var t=e.event,s=e.key.toLowerCase();if(i.DS.stores.SettingsStore.s.keyboardDrag&&i._dragKeysFlat.includes(s)&&i.DS.SelectedSet.size&&i.DS.stores.SettingsStore.s.draggability&&!i.DS.continue){var o={event:t,isDragging:!0,isDraggingKeyboard:!0};i.DS.publish(["Interaction:start:pre","Interaction:start"],o),i._elements=i.DS.getSelection(),i.DS.stores.SettingsStore.s.dragAsBlock&&(i._selectionRect=y(i._elements,i.DS.SelectableSet)),i.handleZIndex(!0);var n=H({shiftKey:i.DS.stores.KeyStore.currentValues.includes("shift"),keyboardDragSpeed:i.DS.stores.SettingsStore.s.keyboardDragSpeed,zoom:i.DS.stores.SettingsStore.s.zoom,key:s,scrollCallback:i.DS.Area.scroll,scrollDiff:i._scrollDiff,canScroll:i.DS.stores.ScrollStore.canScroll,dragKeys:i._dragKeys});i.DS.stores.SettingsStore.s.dragAsBlock&&(n=i.limitDirection(n)),i._elements.forEach(function(e){return W({element:e,posDirection:n,containerRect:i.DS.SelectorArea.rect,useTransform:i.DS.stores.SettingsStore.s.useTransform})}),i.DS.publish(["Interaction:update:pre","Interaction:update"],o)}}),n(this,"keyboardEnd",function(e){var t=e.event,s=e.key.toLowerCase();if(i.DS.stores.SettingsStore.s.keyboardDrag&&i._dragKeysFlat.includes(s)&&i.DS.SelectedSet.size&&i.DS.stores.SettingsStore.s.draggability){var o={event:t,isDragging:i.DS.stores.SettingsStore.s.draggability,isDraggingKeyboard:!0};i.DS.publish(["Interaction:end:pre","Interaction:end"],o)}}),n(this,"start",function(e){var t=e.isDragging,s=e.isDraggingKeyboard;t&&!s&&(i._prevCursorPos=null,i._prevScrollPos=null,i._elements=i.DS.getSelection(),i.DS.stores.SettingsStore.s.dragAsBlock&&(i._selectionRect=y(i._elements,i.DS.SelectableSet)),i.handleZIndex(!0))}),n(this,"stop",function(e){null!=e&&e.isKeyboard||(i._prevCursorPos=null,i._prevScrollPos=null,i.handleZIndex(!1),i._elements=[])}),n(this,"update",function(e){var t=e.isDragging,s=e.isDraggingKeyboard;if(t&&i._elements.length&&!s&&!i.DS.continue){var o=I(i._cursorDiff,"+",i._scrollDiff);i.DS.stores.SettingsStore.s.dragAsBlock&&(o=i.limitDirection(o)),i._elements.forEach(function(e){return W({element:e,posDirection:o,containerRect:i.DS.SelectorArea.rect,useTransform:i.DS.stores.SettingsStore.s.useTransform})})}}),n(this,"limitDirection",function(e){var t=i.DS.SelectorArea.rect,s=i.DS.stores.ScrollStore.scrollAmount,o={top:t.top-i._selectionRect.top+s.y,left:t.left-i._selectionRect.left+s.x,bottom:t.bottom-i._selectionRect.bottom+s.y,right:t.right-i._selectionRect.right+s.x};return 0===e.x&&0===e.y||(e.y<0&&(e.y=Math.max(e.y,o.top)),e.x<0&&(e.x=Math.max(e.x,o.left)),e.y>0&&(e.y=Math.min(e.y,o.bottom)),e.x>0&&(e.x=Math.min(e.x,o.right)),i._selectionRect.top+=e.y,i._selectionRect.bottom+=e.y,i._selectionRect.left+=e.x,i._selectionRect.right+=e.x),e}),n(this,"handleZIndex",function(e){i._elements.forEach(function(t){return t.style.zIndex="".concat((parseInt(t.style.zIndex)||0)+e?9999:-9998)})}),this.DS=o,this.DS.subscribe("Settings:updated:dragKeys",this.assignDragkeys),this.assignDragkeys(),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:end",this.stop),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("KeyStore:down",this.keyboardDrag),this.DS.subscribe("KeyStore:up",this.keyboardEnd)}return o(e,[{key:"_cursorDiff",get:function(){var e=this.DS.stores.PointerStore.currentVal,t=this._prevCursorPos?I(e,"-",this._prevCursorPos):{x:0,y:0};return this._prevCursorPos=e,t}},{key:"_scrollDiff",get:function(){var e=this.DS.stores.ScrollStore.currentVal,t=this._prevScrollPos?I(e,"-",this._prevScrollPos):{x:0,y:0};return this._prevScrollPos=e,t}}]),e}(),es=function(){function e(t){var i=this,o=t.DS,r=t.id,l=t.element,a=t.droppables;s(this,e),n(this,"id",void 0),n(this,"element",void 0),n(this,"_droppables",void 0),n(this,"_rect",void 0),n(this,"_observers",void 0),n(this,"_timeout",void 0),n(this,"_itemsDropped",[]),n(this,"_itemsInside",void 0),n(this,"setReadyClasses",function(e){if(!i.isDestroyed){var t=i.droppables.filter(function(e){return i.DS.SelectedSet.has(e)});t.length&&(t.forEach(function(t){t.classList[e]("".concat(i.Settings.droppableClass)),t.classList[e]("".concat(i.Settings.droppableClass,"-").concat(i.id))}),i.element.classList[e]("".concat(i.Settings.dropZoneReadyClass)))}}),n(this,"handleNoDrop",function(){var e;i.isDestroyed||(i.DS.SelectedSet.forEach(function(e){e.classList.remove(i.Settings.droppedTargetClass),e.classList.remove("".concat(i.Settings.droppedTargetClass,"-").concat(i.id))}),i._itemsDropped=i._itemsDropped.filter(function(e){return!i.DS.SelectedSet.has(e)}),null!==(e=i._itemsDropped)&&void 0!==e&&e.length||i.element.classList.remove("".concat(i.Settings.dropZoneTargetClass)))}),n(this,"handleDrop",function(){var e,t,s;!i.isDestroyed&&(i._itemsDropped=h(new Set([].concat(h(i._itemsDropped),h(null===(e=i.droppables)||void 0===e?void 0:e.filter(function(e){return i.DS.SelectedSet.has(e)}))))),null===(t=i._itemsDropped)||void 0===t||t.forEach(function(e){e.classList.add("".concat(i.Settings.droppedTargetClass)),e.classList.add("".concat(i.Settings.droppedTargetClass,"-").concat(i.id))}),null!==(s=i._itemsDropped)&&void 0!==s&&s.length&&i.element.classList.add("".concat(i.Settings.dropZoneTargetClass)))}),n(this,"handleItemsInsideClasses",function(){var e=!1;i.droppables.forEach(function(t){i.itemsInside.includes(t)?(t.classList.add("".concat(i.Settings.droppedInsideClass)),t.classList.add("".concat(i.Settings.droppedInsideClass,"-").concat(i.id)),e=!0):(t.classList.remove("".concat(i.Settings.droppedInsideClass,"-").concat(i.id)),t.className.includes("".concat(i.Settings.droppedInsideClass,"-"))||t.classList.remove("".concat(i.Settings.droppedInsideClass)))}),e?i.element.classList.add("".concat(i.Settings.dropZoneInsideClass)):i.element.classList.remove("".concat(i.Settings.dropZoneInsideClass))}),n(this,"start",function(e){e.isDragging&&!i.isDestroyed&&i.setReadyClasses("add")}),n(this,"stop",function(e){e.isDragging&&!i.isDestroyed&&(i.setReadyClasses("remove"),i.handleItemsInsideClasses())}),n(this,"toObject",function(){return{id:i.id,element:i.element,droppables:i.droppables,itemsDropped:i.itemsDropped,itemsInside:i.itemsInside}}),this.DS=o,this.Settings=o.stores.SettingsStore.s,this.id=r,this.element=l,a&&(this.droppables=Z(a)),this.element.classList.add("".concat(this.Settings.dropZoneClass)),this.DS.subscribe("Settings:updated:dropZoneClass",function(e){var t=e.settings;i.element&&(i.element.classList.remove(t["dropZoneClass:pre"]),i.element.classList.add(t.dropZoneClass))}),this._observers=L(this.parentNodes,A(function(){return i._rect=null},this.Settings.refreshMemoryRate)),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:end",this.stop)}return o(e,[{key:"destroy",value:function(){var e=this;this._observers.cleanup(),this.element.classList.remove("".concat(this.Settings.dropZoneClass)),this.element.classList.remove("".concat(this.Settings.dropZoneTargetClass)),this.element.classList.remove("".concat(this.Settings.dropZoneReadyClass)),this.droppables.forEach(function(t){t.classList.remove("".concat(e.Settings.droppedTargetClass)),t.classList.remove("".concat(e.Settings.droppedTargetClass,"-").concat(e.id)),t.classList.remove("".concat(e.Settings.droppableClass)),t.classList.remove("".concat(e.Settings.droppableClass,"-").concat(e.id))}),this.DS.unsubscribe("Interaction:start",this.start),this.DS.unsubscribe("Interaction:end",this.stop),this.element=null,this.droppables=null,this.id=null,this._itemsDropped=null,this._itemsInside=null,this.isDestroyed=!0}},{key:"rect",get:function(){return this.isDestroyed?null:this._rect?this._rect:this._rect=this.element.getBoundingClientRect()}},{key:"itemsDropped",get:function(){return this.isDestroyed?null:this._itemsDropped}},{key:"itemsInside",get:function(){var e=this;return this.isDestroyed?null:(this._itemsInside||(this._itemsInside=this.droppables.flatMap(function(t){return Y(e.DS.SelectableSet.rects.get(t),e.rect,e.Settings.dropInsideThreshold)?[t]:[]}),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){return e._itemsInside=null},this.Settings.refreshMemoryRate)),this._itemsInside)}},{key:"parentNodes",get:function(){return this._parentNodes?this._parentNodes:this._parentNodes=N(this.element)}},{key:"droppables",get:function(){return this._droppables?this._droppables:this.DS.SelectableSet.elements},set:function(e){this._droppables=e}}]),e}(),ei=o(function e(i){var o=this,r=i.DS;s(this,e),n(this,"_zoneByElement",new Map),n(this,"_zoneById",new Map),n(this,"_zonesByDroppable",new Map),n(this,"_zones",void 0),n(this,"setDropZones",function(e){var s=e.dropZones;s&&(o._zones&&o._zones.forEach(function(e){return e.destroy()}),o._zones=s.map(function(e){return new es(t({DS:o.DS},e))}),o._zones.forEach(function(e){o._zoneByElement.set(e.element,e),o._zoneById.set(e.id,e),e.droppables.forEach(function(t){var s=o._zonesByDroppable.get(t);if(!(null!=s&&s.length))return o._zonesByDroppable.set(t,[e]);o._zonesByDroppable.set(t,h(new Set([].concat(h(s),[e]))))})}))}),n(this,"_handleDrop",function(e){o._zones.forEach(function(t){t!==e&&t.handleNoDrop()}),e&&e.handleDrop()}),n(this,"_getZoneByElementsFromPoint",function(e,t){for(var s=t.x,i=t.y,n=0,r=e.length;n<r;n++){var l=o._zoneByElement.get(e[n]);if(l&&Y(l.rect,{left:s,right:s,top:i,bottom:i},Math.min(o.Settings.dropTargetThreshold,.5)))return l}}),n(this,"stop",function(e){if(e.isDragging){var t=o.getTarget();o._handleDrop(t)}}),n(this,"getItemsDroppedById",function(e){var t=o._zoneById.get(e);return t?t.itemsDropped:console.warn("[DragSelect] No zone found (id: ".concat(e,")"))}),n(this,"getItemsInsideById",function(e,t){var s=o._zoneById.get(e);if(!s)return console.warn("[DragSelect] No zone found (id: ".concat(e,")"));var i=s.itemsInside;return t&&s.handleItemsInsideClasses(),i}),n(this,"getTarget",function(e){if(null!==(t=o._zones)&&void 0!==t&&t.length){var t,s=(null==e?void 0:e.x)||o.DS.stores.PointerStore.currentVal.x,i=(null==e?void 0:e.y)||o.DS.stores.PointerStore.currentVal.y,n=document.elementsFromPoint(s,i);return o._getZoneByElementsFromPoint(n,{x:s,y:i})}}),this.DS=r,this.Settings=r.stores.SettingsStore.s,this.DS.subscribe("Settings:updated:dropZones",function(e){var t=e.settings;return o.setDropZones(t)}),this.setDropZones({dropZones:this.DS.stores.SettingsStore.s.dropZones}),this.DS.subscribe("Interaction:end",this.stop)}),eo=function(){function e(t){var i=this,o=t.DS;s(this,e),n(this,"isInteracting",void 0),n(this,"isDragging",void 0),n(this,"init",function(){return i.DS.publish("Interaction:init:pre",{})}),n(this,"_init",function(){i.stop(),i.Settings.usePointerEvents?i.DS.Area.HTMLNode.addEventListener("pointerdown",i.start,{passive:!1}):i.DS.Area.HTMLNode.addEventListener("mousedown",i.start),i.DS.Area.HTMLNode.addEventListener("touchstart",i.start,{passive:!1}),i.DS.publish("Interaction:init",{})}),n(this,"start",function(e){return i.DS.publish("Interaction:start:pre",{event:e,isDragging:i.isDragging})}),n(this,"_start",function(e){"touchstart"===e.type&&e.preventDefault(),i._canInteract(e)&&(i.isInteracting=!0,i.isDragging=i.isDragEvent(e),i.DS.publish("Interaction:start",{event:e,isDragging:i.isDragging}),i.Settings.usePointerEvents?(document.addEventListener("pointerup",i.reset),document.addEventListener("pointercancel",i.reset)):document.addEventListener("mouseup",i.reset),document.addEventListener("touchend",i.reset))}),n(this,"isDragEvent",function(e){var t=e.target.closest(".".concat(i.Settings.selectableClass));return!(!i.Settings.draggability||i.DS.stores.KeyStore.isMultiSelectKeyPressed(e))&&!!t&&(i.Settings.immediateDrag&&(i.DS.SelectedSet.size?i.DS.SelectedSet.has(t)||(i.DS.SelectedSet.clear(),i.DS.SelectedSet.add(t)):i.DS.SelectedSet.add(t)),!!i.DS.SelectedSet.has(t))}),n(this,"onClick",function(e){var t=e.event;if(i._canInteract(t)&&!(t.detail>0)){var s=i.DS,o=s.stores,n=o.PointerStore,r=o.KeyStore,l=s.SelectableSet,a=s.SelectedSet;n.start(t);var u=t.target;l.has(u)&&(r.isMultiSelectKeyPressed(t)||a.clear(),a.toggle(u),i.reset())}}),n(this,"stop",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.DS.Area.HTMLNode;i.isInteracting=!1,i.isDragging=!1,i.Settings.usePointerEvents?(e.removeEventListener("pointerdown",i.start,{passive:!1}),document.removeEventListener("pointerup",i.reset),document.removeEventListener("pointercancel",i.reset)):(e.removeEventListener("mousedown",i.start),document.removeEventListener("mouseup",i.reset)),e.removeEventListener("touchstart",i.start,{passive:!1}),document.removeEventListener("touchend",i.reset)}),n(this,"update",function(e){var t=e.event,s=e.scroll_directions,o=e.scroll_multiplier;i.isInteracting&&i.DS.publish(["Interaction:update:pre","Interaction:update"],{event:t,scroll_directions:s,scroll_multiplier:o,isDragging:i.isDragging})}),n(this,"reset",function(e){return i.DS.publish("Interaction:end:pre",{event:e,isDragging:i.isDragging})}),n(this,"_reset",function(e){var t=i.isDragging;i.stop(),i.init(),i.DS.publish("Interaction:end",{event:e,isDragging:t})}),this.DS=o,this.Settings=o.stores.SettingsStore.s,this.DS.subscribe("Settings:updated:area",function(e){var t=e.settings;i.stop(t["area:pre"]),i.init()}),this.DS.subscribe("PointerStore:updated",this.update),this.DS.subscribe("Selectable:click",this.onClick),this.DS.subscribe("Selectable:pointer",function(e){var t=e.event;return i.start(t)}),this.DS.subscribe("Interaction:start:pre",function(e){var t=e.event;return i._start(t)}),this.DS.subscribe("Interaction:init:pre",this._init),this.DS.subscribe("Interaction:end:pre",function(e){var t=e.event;return i._reset(t)}),this.DS.subscribe("Area:scroll",this.update)}return o(e,[{key:"_canInteract",value:function(e){var t=0===e.clientX&&0===e.clientY&&0===e.detail&&e.target;return!!(2!==e.button&&!this.isInteracting&&(!e.target||this.DS.SelectorArea.isInside(e.target))&&(t||this.DS.SelectorArea.isClicked(e)))}}]),e}(),en=o(function e(t){var i=this,o=t.DS;s(this,e),n(this,"subscribers",{}),n(this,"subscribe",function(e,t){return Array.isArray(i.subscribers[e])||(i.subscribers[e]=[]),i.subscribers[e].push(t),i.subscribers[e].length-1}),n(this,"unsubscribe",function(e,t,s){s>=0?i.subscribers[e].splice(s,1):t&&(i.subscribers[e]=i.subscribers[e].filter(function(e){return e!==t}))}),n(this,"publish",function(e,t){Array.isArray(e)?e.forEach(function(e){return i._publish(e,t)}):i._publish(e,t)}),n(this,"_publish",function(e,t){var s=i.subscribers[e];Array.isArray(s)&&(e.includes(":pre")?i._handlePrePublish(s,t):i._handlePublish(s,t))}),n(this,"_handlePublish",function(e,t){for(var s=0,o=e.length;s<o;s++){if(i.DS.stopped)return;e[s](t)}}),n(this,"_handlePrePublish",function(e,t){for(var s=e.length;s--;){if(i.DS.stopped)return;e[s](t)}}),this.DS=o}),er=function(e){r(i,e);var t=T(i);function i(e){var o,r=e.DS;return s(this,i),n(d(o=t.call(this)),"_rects",void 0),n(d(o),"_timeout",void 0),n(d(o),"init",function(){return Z(o.Settings.selectables).forEach(function(e){return o.add(e)})}),n(d(o),"clear",function(){return o.forEach(function(e){return o.delete(e)})}),n(d(o),"_onClick",function(e){return o.DS.publish(["Selectable:click:pre","Selectable:click"],{event:e})}),n(d(o),"_onPointer",function(e){return o.DS.publish(["Selectable:pointer:pre","Selectable:pointer"],{event:e})}),n(d(o),"addAll",function(e){return e.forEach(function(e){return o.add(e)})}),n(d(o),"deleteAll",function(e){return e.forEach(function(e){return o.delete(e)})}),n(d(o),"getRect",function(e){return o._rects?o.rects.get(e):e.getBoundingClientRect()}),o.DS=r,o.Settings=r.stores.SettingsStore.s,o.DS.subscribe("Interaction:init",o.init),o.DS.PubSub.subscribe("Settings:updated:selectables",function(){o.clear(),o.init()}),o.DS.subscribe("Settings:updated:selectableClass",function(e){var t=e.settings;o.forEach(function(e){e.classList.remove(t["selectableClass:pre"]),e.classList.add(t.selectableClass)})}),o}return o(i,[{key:"add",value:function(e){if(p(l(i.prototype),"has",this).call(this,e))return this;var t={items:this.elements,item:e};return this.DS.publish("Selectable:added:pre",t),e.classList.add(this.Settings.selectableClass),e.addEventListener("click",this._onClick),this.Settings.usePointerEvents?e.addEventListener("pointerdown",this._onPointer,{passive:!1}):e.addEventListener("mousedown",this._onPointer),e.addEventListener("touchstart",this._onPointer,{passive:!1}),this.Settings.draggability&&!this.Settings.useTransform&&w({computedStyle:window.getComputedStyle(e),node:e}),p(l(i.prototype),"add",this).call(this,e),this.DS.publish("Selectable:added",t),this}},{key:"delete",value:function(e){if(!p(l(i.prototype),"has",this).call(this,e))return!0;var t={items:this.elements,item:e};return this.DS.publish("Selectable:removed:pre",t),e.classList.remove(this.Settings.selectableClass),e.classList.remove(this.Settings.hoverClass),e.removeEventListener("click",this._onClick),this.Settings.usePointerEvents?e.removeEventListener("pointerdown",this._onPointer,{passive:!1}):e.removeEventListener("mousedown",this._onPointer),e.removeEventListener("touchstart",this._onPointer,{passive:!1}),p(l(i.prototype),"delete",this).call(this,e),this.DS.publish("Selectable:removed",t),!0}},{key:"elements",get:function(){return Array.from(this.values())}},{key:"rects",get:function(){var e=this;return this._rects||(this._rects=new Map,this.forEach(function(t){return e._rects.set(t,t.getBoundingClientRect())}),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){return e._rects=null},this.Settings.refreshMemoryRate)),this._rects}}]),i}(_(Set)),el=function(e){r(i,e);var t=T(i);function i(e){var o,r=e.DS;return s(this,i),n(d(o=t.call(this)),"clear",function(){return o.forEach(function(e){return o.delete(e)})}),n(d(o),"addAll",function(e){return e.forEach(function(e){return o.add(e)})}),n(d(o),"deleteAll",function(e){return e.forEach(function(e){return o.delete(e)})}),o.DS=r,o}return o(i,[{key:"add",value:function(e){if(p(l(i.prototype),"has",this).call(this,e))return this;var t={items:this.elements,item:e};return this.DS.publish("Selected:added:pre",t),p(l(i.prototype),"add",this).call(this,e),e.classList.add(this.DS.stores.SettingsStore.s.selectedClass),e.style.zIndex="".concat((parseInt(e.style.zIndex)||0)+1),this.DS.publish("Selected:added",t),this}},{key:"delete",value:function(e){if(!p(l(i.prototype),"has",this).call(this,e))return!0;var t={items:this.elements,item:e};this.DS.publish("Selected:removed:pre",t);var s=p(l(i.prototype),"delete",this).call(this,e);return e.classList.remove(this.DS.stores.SettingsStore.s.selectedClass),e.style.zIndex="".concat((parseInt(e.style.zIndex)||0)-1),this.DS.publish("Selected:removed",t),s}},{key:"toggle",value:function(e){return this.has(e)?this.delete(e):this.add(e),e}},{key:"elements",get:function(){return Array.from(this.values())}}]),i}(_(Set)),ea=function(){function e(t){var i=this,o=t.DS;s(this,e),n(this,"_prevSelectedSet",void 0),n(this,"start",function(e){var t=e.event;e.isDragging||(i._storePrevious(t),i._handleInsideSelection(!0,t))}),n(this,"update",function(e){e.isDragging||i.DS.continue||i._handleInsideSelection()}),n(this,"_handleInsideSelection",function(e,t){var s,o=i.DS,n=o.SelectableSet,r=o.SelectorArea,l=o.Selector,a=i.DS.stores.KeyStore.isMultiSelectKeyPressed(t)&&i.Settings.multiSelectToggling,u=i.Settings.selectionThreshold,c=n.rects,_=l.rect,d=new Map,T=new Map,p=function(e,t){var s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!s){if(Array.isArray(e)||(s=E(e))){s&&(e=s);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r=!0,l=!1;return{s:function(){s=s.call(e)},n:function(){var e=s.next();return r=e.done,e},e:function(e){l=!0,n=e},f:function(){try{r||null==s.return||s.return()}finally{if(l)throw n}}}}(c);try{for(p.s();!(s=p.n()).done;){var h=g(s.value,2),m=h[0],S=h[1];r.isInside(m,S)&&(Y(S,_,u)?d.set(m,S):T.set(m,S))}}catch(e){p.e(e)}finally{p.f()}if(!i.DS.continue){var I=i.filterSelected({select:d,unselect:T,selectorRect:_}),$=I.select,O=I.unselect;$.forEach(function(t,s){return G({element:s,force:e,multiSelectionToggle:a,SelectedSet:i.DS.SelectedSet,hoverClassName:i.Settings.hoverClass})}),O.forEach(function(t,s){return V({element:s,force:e,SelectedSet:i.DS.SelectedSet,hoverClassName:i.Settings.hoverClass,PrevSelectedSet:i._prevSelectedSet})})}}),n(this,"filterSelected",function(e){var t=e.select,s=e.unselect;return e.selectorRect,{select:t,unselect:s}}),this.DS=o,this.Settings=this.DS.stores.SettingsStore.s,this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update)}return o(e,[{key:"_storePrevious",value:function(e){var t=this.DS,s=t.stores.KeyStore,i=t.SelectedSet;s.isMultiSelectKeyPressed(e)?this._prevSelectedSet=new Set(i):this._prevSelectedSet=new Set}}]),e}(),eu=function(){function e(t){var i=this,o=t.DS;s(this,e),n(this,"_rect",void 0),n(this,"attachSelector",function(){var e,t;i.HTMLNode&&null!==(e=i.DS.SelectorArea)&&void 0!==e&&e.HTMLNode&&i.DS.SelectorArea.HTMLNode.removeChild(i.HTMLNode),i.HTMLNode=i.DS.stores.SettingsStore.s.selector||b(i.DS.stores.SettingsStore.s.customStyles),i.HTMLNode.classList.add(i.DS.stores.SettingsStore.s.selectorClass),i.HTMLNode&&null!==(t=i.DS.SelectorArea)&&void 0!==t&&t.HTMLNode&&i.DS.SelectorArea.HTMLNode.appendChild(i.HTMLNode)}),n(this,"start",function(e){if(!e.isDragging){var t=i.DS.stores.PointerStore.initialValArea;Q(i.HTMLNode,O(t,1)),i.HTMLNode.style.display="block",i._rect=null}}),n(this,"stop",function(){i.HTMLNode.style.width="0",i.HTMLNode.style.height="0",i.HTMLNode.style.display="none"}),n(this,"update",function(e){if(!e.isDragging&&!i.DS.continue){var t=i.DS.stores,s=t.ScrollStore,o=t.PointerStore,n=k({scrollAmount:s.scrollAmount,initialPointerPos:o.initialValArea,pointerPos:o.currentValArea});Q(i.HTMLNode,n),i._rect=null}}),this.DS=o,this.DS.subscribe("Settings:updated:selectorClass",function(e){var t=e.settings;i.HTMLNode.classList.remove(t["selectorClass:pre"]),i.HTMLNode.classList.add(t.selectorClass)}),this.DS.subscribe("Settings:updated:selector",this.attachSelector),this.DS.subscribe("Settings:updated:customStyles",this.attachSelector),this.attachSelector(),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("Interaction:end",this.stop)}return o(e,[{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),e}(),ec=function(){function e(t){var i=this,o=t.DS;s(this,e),n(this,"_scrollInterval",void 0),n(this,"_rect",void 0),n(this,"currentEdges",[]),n(this,"start",function(){i.applyElements("append"),i.updatePos()}),n(this,"applyElements",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"append",t=document.body?"body":"documentElement",s="".concat(e,"Child");i.HTMLNode[s](i.DS.Selector.HTMLNode),document[t][s](i.HTMLNode)}),n(this,"updatePos",function(){i._rect=null;var e=i.DS.Area.rect,t=i.DS.Area.computedBorder,s=i.HTMLNode.style,o="".concat(e.top+t.top,"px"),n="".concat(e.left+t.left,"px"),r="".concat(e.width,"px"),l="".concat(e.height,"px");s.top!==o&&(s.top=o),s.left!==n&&(s.left=n),s.width!==r&&(s.width=r),s.height!==l&&(s.height=l)}),n(this,"stop",function(e){i.stopAutoScroll(),e&&i.applyElements("remove")}),n(this,"startAutoScroll",function(){i.currentEdges=[],i._scrollInterval=setInterval(function(){return i.handleAutoScroll()},16)}),n(this,"handleAutoScroll",function(){if(!i.DS.continue){var e=i.DS,t=e.stores.PointerStore,s=e.Area;i.currentEdges=v({elementRect:O(t.currentVal),containerRect:i.rect,tolerance:i.DS.stores.SettingsStore.s.overflowTolerance}),i.currentEdges.length&&s.scroll(i.currentEdges,i.DS.stores.SettingsStore.s.autoScrollSpeed)}}),n(this,"stopAutoScroll",function(){i.currentEdges=[],clearInterval(i._scrollInterval)}),n(this,"isInside",function(e,t){return!!i.DS.Area.HTMLNode.contains(e)&&!!i.DS.stores.ScrollStore.canScroll||Y(i.rect,t||e.getBoundingClientRect())}),this.DS=o,this.HTMLNode=f(),this.DS.subscribe("Settings:updated:selectorAreaClass",function(e){var t=e.settings;i.HTMLNode.classList.remove(t["selectorAreaClass:pre"]),i.HTMLNode.classList.add(t.selectorAreaClass)}),this.HTMLNode.classList.add(this.DS.stores.SettingsStore.s.selectorAreaClass),this.DS.subscribe("Area:modified",this.updatePos),this.DS.subscribe("Area:modified",this.updatePos),this.DS.subscribe("Interaction:init",this.start),this.DS.subscribe("Interaction:start",this.startAutoScroll),this.DS.subscribe("Interaction:end",function(){i.updatePos(),i.stopAutoScroll()})}return o(e,[{key:"isClicked",value:function(e){var t=this.DS.stores.PointerStore,s=e?t.getPointerPosition(e):t.initialVal;return Y({left:s.x,top:s.y,right:s.x,bottom:s.y},this.rect)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),e}(),e_=function(){function e(t){var i=this,o=t.DS;s(this,e),n(this,"_currentValues",new Set),n(this,"_keyMapping",{control:"ctrlKey",shift:"shiftKey",meta:"metaKey"}),n(this,"init",function(){document.addEventListener("keydown",i.keydown),document.addEventListener("keyup",i.keyup),window.addEventListener("blur",i.reset)}),n(this,"keydown",function(e){var t=e.key.toLowerCase();i.DS.publish("KeyStore:down:pre",{event:e,key:t}),i._currentValues.add(t),i.DS.publish("KeyStore:down",{event:e,key:t})}),n(this,"keyup",function(e){var t=e.key.toLowerCase();i.DS.publish("KeyStore:up:pre",{event:e,key:t}),i._currentValues.delete(t),i.DS.publish("KeyStore:up",{event:e,key:t})}),n(this,"stop",function(){document.removeEventListener("keydown",i.keydown),document.removeEventListener("keyup",i.reset),window.removeEventListener("blur",i.reset),i.reset()}),n(this,"reset",function(){return i._currentValues.clear()}),this.DS=o,this.DS.subscribe("Interaction:init",this.init)}return o(e,[{key:"isMultiSelectKeyPressed",value:function(e){var t=this;if(this.DS.stores.SettingsStore.s.multiSelectMode)return!0;var s=this.DS.stores.SettingsStore.s.multiSelectKeys.map(function(e){return e.toLocaleLowerCase()});return!!(this.currentValues.some(function(e){return s.includes(e.toLocaleLowerCase())})||e&&s.some(function(s){return e[t._keyMapping[s]]}))}},{key:"currentValues",get:function(){return Array.from(this._currentValues.values())}}]),e}(),ed=function(){function e(t){var i=this,o=t.DS;s(this,e),n(this,"_isMouseInteraction",!1),n(this,"_initialValArea",void 0),n(this,"_currentValArea",void 0),n(this,"_lastValArea",void 0),n(this,"_initialVal",void 0),n(this,"_currentVal",void 0),n(this,"_lastVal",void 0),n(this,"_lastTouch",void 0),n(this,"init",function(){i.Settings.usePointerEvents?document.addEventListener("pointermove",i.update,{passive:!1}):document.addEventListener("mousemove",i.update),document.addEventListener("touchmove",i.update,{passive:!1})}),n(this,"getPointerPosition",function(e){return P({event:i._normalizedEvent(e)})}),n(this,"update",function(e){e&&(i.DS.publish("PointerStore:updated:pre",{event:e}),i.currentVal=i.getPointerPosition(e),i._isMouseInteraction&&i.DS.publish("PointerStore:updated",{event:e}))}),n(this,"stop",function(){i.Settings.usePointerEvents?document.removeEventListener("pointermove",i.update,{passive:!1}):document.removeEventListener("mousemove",i.update),document.removeEventListener("touchmove",i.update,{passive:!1}),setTimeout(function(){return i._isMouseInteraction=!1},100)}),n(this,"reset",function(e){e&&(i.currentVal=i.lastVal=i.getPointerPosition(e),i.stop(),i.init())}),this.DS=o,this.Settings=o.stores.SettingsStore.s,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",function(e){var t=e.event;return i.start(t)}),this.DS.subscribe("Interaction:end",function(e){var t=e.event;return i.reset(t)})}return o(e,[{key:"start",value:function(e){e&&(this._isMouseInteraction=!0,this.currentVal=this.initialVal=this.getPointerPosition(e))}},{key:"_normalizedEvent",value:function(e){return"touches"in e&&"touchend"!==e.type&&(this._lastTouch=e),"touches"in e?this._lastTouch.touches[0]:e}},{key:"initialValArea",get:function(){return this._initialValArea?this._initialValArea:{x:0,y:0}}},{key:"currentValArea",get:function(){return this._currentValArea?this._currentValArea:{x:0,y:0}}},{key:"lastValArea",get:function(){return this._lastValArea?this._lastValArea:{x:0,y:0}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}},set:function(e){this._initialVal=e,this._initialValArea=e&&I(e,"-",I($(this.DS.Area.rect),"+",$(this.DS.Area.computedBorder)))}},{key:"currentVal",get:function(){return this._currentVal?this._currentVal:{x:0,y:0}},set:function(e){this._currentVal=e,this._currentValArea=e&&I(e,"-",I($(this.DS.Area.rect),"+",$(this.DS.Area.computedBorder)))}},{key:"lastVal",get:function(){return this._lastVal?this._lastVal:{x:0,y:0}},set:function(e){this._lastVal=e,this._lastValArea=e&&I(e,"-",I($(this.DS.Area.rect),"+",$(this.DS.Area.computedBorder)))}}]),e}(),eT=function(){function e(t){var i=this,o=t.DS;s(this,e),n(this,"_initialVal",void 0),n(this,"_currentVal",void 0),n(this,"_canScroll",void 0),n(this,"init",function(){return i.DS.stores.SettingsStore.s.area.addEventListener("scroll",i.update)}),n(this,"start",function(){i._currentVal=i._initialVal=D(i.DS.stores.SettingsStore.s.area),i.DS.stores.SettingsStore.s.area.addEventListener("scroll",i.update)}),n(this,"update",function(){return i._currentVal=D(i.DS.stores.SettingsStore.s.area)}),n(this,"stop",function(){i.DS.stores.SettingsStore.s.area.removeEventListener("scroll",i.update),i._initialVal={x:0,y:0},i._canScroll=null}),n(this,"reset",function(){i.stop(),i.start()}),this.DS=o,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",function(){return i.start()}),this.DS.subscribe("Interaction:end",function(){return i.reset()})}return o(e,[{key:"canScroll",get:function(){return"boolean"==typeof this._canScroll?this._canScroll:this._canScroll=R(this.DS.stores.SettingsStore.s.area)}},{key:"scrollAmount",get:function(){var e,t=I(this.currentVal,"-",this.initialVal),s=I(I(t,"*",{x:e=this.DS.stores.SettingsStore.s.zoom,y:e}),"-",t);return{x:t.x+s.x,y:t.y+s.y}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}}},{key:"currentVal",get:function(){return this._currentVal||(this._currentVal=D(this.DS.stores.SettingsStore.s.area)),this._currentVal}}]),e}(),ep=o(function e(i){var o=this,r=i.DS,l=i.settings;s(this,e),n(this,"_settings",{}),n(this,"s",{}),n(this,"update",function(e){var s=e.settings,i=e.init;return o.DS.publish("Settings:updated:pre",t({settings:s},i?{init:i}:{}))}),n(this,"_update",function(e){for(var s=e.settings,i=e.init,r=t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t(t({},X("area",s.area,i,document)),X("selectables",s.selectables,i,null)),X("autoScrollSpeed",s.autoScrollSpeed,i,5)),X("overflowTolerance",s.overflowTolerance,i,{x:25,y:25})),X("zoom",s.zoom,i,1)),X("customStyles",s.customStyles,i,!1)),X("multiSelectMode",s.multiSelectMode,i,!1)),X("multiSelectToggling",s.multiSelectToggling,i,!0)),X("multiSelectKeys",s.multiSelectKeys,i,["Control","Shift","Meta"])),X("selector",s.selector,i,null)),X("selectionThreshold",s.selectionThreshold,i,0)),X("draggability",s.draggability,i,!0)),X("immediateDrag",s.immediateDrag,i,!0)),X("keyboardDrag",s.keyboardDrag,i,!0)),X("dragKeys",s.dragKeys,i,{up:["ArrowUp"],down:["ArrowDown"],left:["ArrowLeft"],right:["ArrowRight"]})),X("keyboardDragSpeed",s.keyboardDragSpeed,i,10)),X("useTransform",s.useTransform,i,!0)),X("refreshMemoryRate",s.refreshMemoryRate,i,80)),X("dropZones",s.dropZones,i,[])),X("dropInsideThreshold",s.dropInsideThreshold,i,1)),X("dropTargetThreshold",s.dropTargetThreshold,i,0)),X("usePointerEvents",s.usePointerEvents,i,!1)),X("hoverClass",s.hoverClass,i,"ds-hover")),X("selectableClass",s.selectableClass,i,"ds-selectable")),X("selectedClass",s.selectedClass,i,"ds-selected")),X("selectorClass",s.selectorClass,i,"ds-selector")),X("selectorAreaClass",s.selectorAreaClass,i,"ds-selector-area")),X("droppedTargetClass",s.droppedTargetClass,i,"ds-dropped-target")),X("droppedInsideClass",s.droppedInsideClass,i,"ds-dropped-inside")),X("droppableClass",s.droppableClass,i,"ds-droppable")),X("dropZoneClass",s.dropZoneClass,i,"ds-dropzone")),X("dropZoneReadyClass",s.dropZoneReadyClass,i,"ds-dropzone-ready")),X("dropZoneTargetClass",s.dropZoneTargetClass,i,"ds-dropzone-target")),X("dropZoneInsideClass",s.dropZoneInsideClass,i,"ds-dropzone-inside")),X("dragAsBlock",s.dragAsBlock,i,!1)),l=0,a=Object.entries(r);l<a.length;l++)!function(){var e,t=g(a[l],2),s=t[0],i=t[1];s in o._settings||Object.defineProperty(o.s,s,{get:function(){return o._settings[s]},set:function(e){return o.update({settings:n({},s,e)})}}),o._settings["".concat(s,":pre")]=o._settings[s],o._settings[s]=i;var r={settings:(n(e={},s,o._settings[s]),n(e,"".concat(s,":pre"),o._settings["".concat(s,":pre")]),e)};o.DS.publish("Settings:updated",r),o.DS.publish("Settings:updated:".concat(s),r)}()}),this.DS=r,this.DS.subscribe("Settings:updated:pre",this._update),this.update({settings:l,init:!0})}),eg=function(){function e(t){var i=this;s(this,e),n(this,"continue",!1),n(this,"start",function(){i.stopped=!1,i.Interaction.init()}),n(this,"break",function(){return i.continue=!0}),n(this,"setSettings",function(e){return i.stores.SettingsStore.update({settings:e})}),n(this,"getSelection",function(){return i.SelectedSet.elements}),n(this,"getSelectables",function(){return i.SelectableSet.elements}),n(this,"getInitialCursorPosition",function(){return i.stores.PointerStore.initialVal}),n(this,"getCurrentCursorPosition",function(){return i.stores.PointerStore.currentVal}),n(this,"getPreviousCursorPosition",function(){return i.stores.PointerStore.lastVal}),n(this,"getInitialCursorPositionArea",function(){return i.stores.PointerStore.initialValArea}),n(this,"getCurrentCursorPositionArea",function(){return i.stores.PointerStore.currentValArea}),n(this,"getPreviousCursorPositionArea",function(){return i.stores.PointerStore.lastValArea}),n(this,"isMultiSelect",function(e){return i.stores.KeyStore.isMultiSelectKeyPressed(e)}),n(this,"isDragging",function(){return i.Interaction.isDragging}),n(this,"getZoneByCoordinates",function(e){var t;return null===(t=i.DropZones.getTarget(e))||void 0===t?void 0:t.toObject()}),n(this,"getItemsDroppedByZoneId",function(e){return i.DropZones.getItemsDroppedById(e)}),n(this,"getItemsInsideByZoneId",function(e,t){return i.DropZones.getItemsInsideById(e,t)}),this.PubSub=new en({DS:this}),this.subscribe=this.PubSub.subscribe,this.unsubscribe=this.PubSub.unsubscribe,this.publish=this.PubSub.publish,this.stores={},this.stores.SettingsStore=new ep({DS:this,settings:t}),this.stores.PointerStore=new ed({DS:this}),this.stores.ScrollStore=new eT({DS:this}),this.stores.KeyStore=new e_({DS:this}),this.Area=new ee({DS:this}),this.Selector=new eu({DS:this}),this.SelectorArea=new ec({DS:this}),this.SelectableSet=new er({DS:this}),this.SelectedSet=new el({DS:this}),this.Selection=new ea({DS:this}),this.Drag=new et({DS:this}),this.DropZones=new ei({DS:this}),this.Interaction=new eo({DS:this}),q({subscribe:this.subscribe,publish:this.publish,SelectedSet:this.SelectedSet,Interaction:this.Interaction,DropZones:this.DropZones}),this.subscribe("Interaction:end",function(){return i.continue=!1}),this.start()}return o(e,[{key:"stop",value:function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s&&this.publish("callback",{items:this.getSelection()}),this.Interaction.stop(),this.Area.stop(),this.Drag.stop(),this.Selector.stop(),this.SelectorArea.stop(e),this.stores.KeyStore.stop(),this.stores.PointerStore.stop(),this.stores.ScrollStore.stop(),e&&this.SelectableSet.clear(),t&&this.SelectedSet.clear(),this.stopped=!0}},{key:"addSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.SelectedSet.addAll(Z(e)),s||this.addSelectables(e),t&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"removeSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.SelectedSet.deleteAll(Z(e)),s&&this.removeSelectables(e),t&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"toggleSelection",value:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Z(e).forEach(function(o){return t.SelectedSet.has(o)?t.removeSelection(e,s,i):t.addSelection(e,s,i)}),s&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"setSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.clearSelection(),this.addSelection(e,t,s),this.getSelection()}},{key:"clearSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.SelectedSet.clear(),e&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"addSelectables",value:function(e,t,s){var i=Z(e);return this.SelectableSet.addAll(i),t&&this.SelectedSet.addAll(i),s&&this.PubSub.publish("callback",{items:this.getSelection()}),e}},{key:"setSelectables",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return console.warn('[DragSelect] DEPRECATION ".setSelectables" is deprecated and will be removed soon. Please use "ds.setSettings({ selectables: << new dom elements >> })" instead (see docs)'),this.removeSelectables(e,t),this.addSelectables(e,s)}},{key:"removeSelectables",value:function(e,t,s){return this.SelectableSet.deleteAll(Z(e)),t&&this.removeSelection(e),s&&this.PubSub.publish("callback",{items:this.getSelection()}),e}}]),e}();return eg.isCollision=Y,eg}()},341:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var i=s(655),o=s(7294),n=function(){};function r(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function l(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var a=function(e,t){void 0===e&&(e={}),void 0===t&&(t=[]);var s=e.onFiles,a=e.onText,u=e.onUri,c=(0,o.useState)(!1),_=c[0],d=c[1],T=(0,o.useCallback)(d,[]),p=(0,o.useMemo)(function(){var t;return t=e,function(e,s){var i=e.getData("text/uri-list");if(i){(t.onUri||n)(i,s);return}if(e.files&&e.files.length){(t.onFiles||n)(Array.from(e.files),s);return}if(s.clipboardData){var o=s.clipboardData.getData("text");(t.onText||n)(o,s);return}}},[s,a,u]);return(0,o.useEffect)(function(){var e=function(e){e.preventDefault(),T(!0)},t=function(e){e.preventDefault(),T(!0)},s=function(){T(!1)},i=function(){T(!1)},o=function(e){e.preventDefault(),T(!1),p(e.dataTransfer,e)},n=function(e){p(e.clipboardData,e)};return r(document,"dragover",e),r(document,"dragenter",t),r(document,"dragleave",s),r(document,"dragexit",i),r(document,"drop",o),a&&r(document,"paste",n),function(){l(document,"dragover",e),l(document,"dragenter",t),l(document,"dragleave",s),l(document,"dragexit",i),l(document,"drop",o),l(document,"paste",n)}},(0,i.pr)([p],t)),{over:_}}},655:function(e,t,s){"use strict";s.d(t,{_T:function(){return o},pi:function(){return i},pr:function(){return n}});var i=function(){return(i=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function o(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)0>t.indexOf(i[o])&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(s[i[o]]=e[i[o]]);return s}function n(){for(var e=0,t=0,s=arguments.length;t<s;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<s;t++)for(var n=arguments[t],r=0,l=n.length;r<l;r++,o++)i[o]=n[r];return i}}}]);